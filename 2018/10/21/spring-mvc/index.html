<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Spring MVC &middot; Hyeonil's Note</title><meta name="description" content=""> <!--[if gt IE 8]><!----><style> article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html,body{margin:0;padding:0}html{line-height:1.65}body{color:#515151;background-color:#fff}a{text-decoration:none}img{display:block;max-width:100%;margin:0 0 1rem}img.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem);margin-left:calc(-1rem);margin-right:calc(-1rem)}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:600;line-height:1.25;color:#313131;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.25rem;font-weight:300}ul,ol,dl{margin-top:0;margin-bottom:1rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.page-title,.post-title{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.25rem;margin-bottom:1rem;color:#9a9a9a;font-weight:bold}.related{padding-top:2rem;padding-bottom:2rem}.related-posts{padding-left:0;list-style:none}.related-posts>li{margin-top:1rem}.related-posts>li>*{font-weight:normal}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9;margin-left:-1rem;margin-right:-1rem}body{padding-left:0.5rem}@media (min-width: 48em){html{font-size:16px}body{padding-left:0}}@media (min-width: 58em){html{font-size:18px}}.sr-only{display:none}.backdrop{display:none}.sidebar{position:relative;z-index:4;padding:2rem 1rem;color:rgba(255,255,255,0.75);background-color:#202020;text-align:left;background-size:cover;background-position:center center;min-height:640px;min-height:100vh;margin-left:-0.5rem}.sidebar a{color:#fff}.sidebar ul{list-style:none;padding-left:0}.sidebar-sticky{position:absolute;right:1rem;bottom:1rem;left:1rem}.sidebar-about>h1{color:#fff;font-size:2rem}.sidebar-nav-item{font-weight:bold;display:block;line-height:1.75;padding:.25rem .1rem;border-top:1px solid rgba(255,255,255,0.23)}.sidebar-social>ul{min-height:3.5rem}.sidebar::before{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(32,32,32,0.33);background:-moz-linear-gradient(bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%);background:-webkit-linear-gradient(bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%);background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%)}@media (min-width: 48em){.sidebar{position:fixed;top:0;left:0;bottom:0;width:18rem;margin-left:0}}.menu{display:block;padding:1.25rem 1.5rem;color:#9a9a9a;border-bottom:none;position:fixed;top:0;left:0;z-index:2}@media (min-width: 48em){.menu{position:absolute;left:-9999px}}@media (min-width: 48em){.menu:focus{left:19.5rem}}@media (min-width: 64em){.menu:focus{left:21.5rem}}.content{padding-top:4rem;padding-bottom:4rem}@media (min-width: 48em){.content{max-width:38rem;margin-left:20rem;margin-right:2rem;border-left:none}}@media (min-width: 64em){.content{margin-left:22rem;margin-right:4rem}}.me{float:right;width:6.5rem;margin-top:-4.8rem;margin-left:1rem;border-radius:100%;position:relative}@media (min-width: 38em){.me{width:7rem;margin-top:-5.05rem}}@media (min-width: 48em){.me{width:6.5rem;margin-top:-4.8rem}}@media (min-width: 58em){.me{width:7rem;margin-top:-5.05rem}}</style><noscript><link rel="stylesheet" href="/public/css/non-essentials.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|PT+Serif:400,400italic,700,700italic"> </noscript><link rel="preload" href="/public/css/non-essentials.css" as="style" onload="this.rel='stylesheet'"><style> html { font-family: "PT Serif", Georgia, serif; } :focus { outline-color: #A85641; } .font-accent { font-family: "Roboto Slab", "PT Serif", Georgia, serif; } .content a, .related-posts li a:hover { color: #A85641; } ::selection { color: #fff; background: #A85641; } ::-moz-selection { color: #fff; background: #A85641; } .sidebar { background-image: url('/public/img/side.jpg'); }</style><!--<![endif]--><link rel="canonical" href="https://blog.nuti.pe.kr/2018/10/21/spring-mvc/" /><link rel="alternate" type="application/atom+xml" title="Hyeonil's Note Atom Feed" href="/atom.xml"><link rel="stylesheet" href="/public/css/asciidoctor.css"><link rel="stylesheet" href="/public/css/coderay.css"><link rel="stylesheet" href="/public/css/font-awesome.min.css"><link rel="stylesheet" href="/public/css/foundation.min.css"><link rel="stylesheet" href="/public/css/normalize.css"><link rel="stylesheet" href="/public/css/custom.css"> <script>!function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n.isReady=!1,n.loadJSDeferred=function(a,r){function d(){n.isReady=!0;var d=e.createElement("script");d.src=a,r&&(("onload"in d?t:o)(d,r),d.onload||t(d,r));var i=e.getElementsByTagName("script")[0];i.parentNode.insertBefore(d,i)}n.isReady?d():n.addEventListener?n.addEventListener("load",d,!1):n.attachEvent?n.attachEvent("onload",d):n.onload=d}}(window,document); </script> <!--[if lt IE 9]> <script src="https://unpkg.com/html5shiv/dist/html5shiv.min.js"></script> <![endif]--><body> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu" href="#_asidebar"> <span>☰</span> <span class="sr-only">Menu</span> </a><main class="content container" role="main"><article id="post-2018/10/21/spring-mvc" class="post" role="article"><h1 class="post-title"> Spring MVC</h1><div class="post-date"> <time datetime="2018-10-21T00:00:00+00:00">2018/10/21/</time> <span>on <a href="/tag/spring/">Spring</a><span>, </span><a href="/tag/java/">Java</a></span></div><hr/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="sect1"><h2 id="term"><a class="link" href="#term">1. 기본 용어</a></h2><div class="sectionbody"><div class="sect2"><h3 id="request-mapping"><a class="link" href="#request-mapping">1.1. @RequestMapping</a></h3><div class="ulist"><ul><li><p>DefaultAnnotationHandlerMapping에서 매핑<li><p>url과 컨트롤러 메소드 매핑정보 생성<li><p>클래스, 메소드 레벨에 사용 가능<li><p>url, method, parameter, header 정보를 통해 구분 가능<li><p>url에 ANT스타일의 와일드카드 사용 가능<li><p>상속 가능</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/home</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/home*</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/home/**/action</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/user/{userId}</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">/index</span><span class="delimiter">&quot;</span></span>})
<span class="annotation">@RequestMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/user/{userId}</span><span class="delimiter">&quot;</span></span>, method=RequestMethod.GET)
<span class="annotation">@RequestMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span>, method=RequestMethod.POST, params=<span class="string"><span class="delimiter">&quot;</span><span class="content">env=mobile</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span>, method=RequestMethod.POST, params=<span class="string"><span class="delimiter">&quot;</span><span class="content">env=!mobile</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span>, method=RequestMethod.POST, headers=<span class="string"><span class="delimiter">&quot;</span><span class="content">content-type=application/json</span><span class="delimiter">&quot;</span></span>)</code></pre></div></div></div><div class="sect2"><h3 id="controller"><a class="link" href="#controller">1.2. @Controller</a></h3><div class="ulist"><ul><li><p>Controller를 정의<li><p>여러 값들을 매핑할 수 있도록 함</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="servlet"><a class="link" href="#servlet">1.3. HttpServletRequest, HttpServletResponse</a></h3><div class="ulist"><ul><li><p>서블릿의 HttpServletRequest와 HttpServletResponse</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> method(HttpServletRequest request, HttpServletResponse response) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="http-session"><a class="link" href="#http-session">1.4. HttpSession</a></h3><div class="ulist"><ul><li><p>세션관리 객체</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> method(HttpSession session) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="web-request"><a class="link" href="#web-request">1.5. WebRequest</a></h3><div class="ulist"><ul><li><p>HttpServletRequest의 정보를 대부분 그대로 갖고 있는 서블릿 API에 종속적이지 않은 오브젝트 타입<li><p>서블릿과 프틀릿 환경 양쪽에 모두 적용 가능한 범용적인 핸들러 인터셉터를 만들 때 활용하기 위함</ul></div></div><div class="sect2"><h3 id="native-web-request"><a class="link" href="#native-web-request">1.6. NativeWebRequest</a></h3><div class="ulist"><ul><li><p>WebRequest 내부에 감춰진 HttpServeltRequest와 같은 환경종속적인 오브젝트를 가져올 수 있는 메소드가 추가되어있음</ul></div></div><div class="sect2"><h3 id="path-variable"><a class="link" href="#path-variable">1.7. @PathVariable</a></h3><div class="ulist"><ul><li><p>url로 들어가는 패스 변수를 받는다</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// curl https://sample.nuti.pe.kr/home/1</span>
<span class="annotation">@RequestMappint</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/home/{id}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@PathVariable</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> id) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="request-param"><a class="link" href="#request-param">1.8. @RequestParam</a></h3><div class="ulist"><ul><li><p><code>application/x-www-form-urlencoded</code>요청에서 쿼리스트링을 매핑</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// curl https://sample.nuti.pe.kr/home?id=1</span>
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@RequestParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> id) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="cookie-value"><a class="link" href="#cookie-value">1.9. @CookieValue</a></h3><div class="ulist"><ul><li><p>쿠키값을 받음<li><p>필수여부 지정 가능</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// curl -b 'auth=abc' https://sample.nuti.pe.kr</span>
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@CookieValue</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">auth</span><span class="delimiter">&quot;</span></span>, required=<span class="predefined-constant">false</span>, defaultValue=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> auth) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="request-header"><a class="link" href="#request-header">1.10. @RequestHeader</a></h3><div class="ulist"><ul><li><p>헤더 정보를 받음<li><p>필수여부 지정 가능</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// curl -H 'Content-Type: application/json' https://sample.nuti.pe.kr</span>
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@RequestHeader</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span>, required=<span class="predefined-constant">true</span>) <span class="predefined-type">String</span> contentType) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="model-map"><a class="link" href="#model-map">1.11. Map, Model, ModelMap</a></h3><div class="ulist"><ul><li><p>모델 정보를 담는데 사용</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> method(<span class="predefined-type">Map</span> model) {
  ...
}
<span class="directive">public</span> <span class="type">void</span> method(Model model) {
  ...
}
<span class="directive">public</span> <span class="type">void</span> method(ModelMap model) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="model-attribute"><a class="link" href="#model-attribute">1.12. @ModelAttribute</a></h3><div class="ulist"><ul><li><p>생략가능<li><p>모델 정보를 객체에 매핑<li><p>클라이언트에서 받은 정보를 매핑할 수도 있고, 서버에서 등록한 정보도 매핑할 수 있음</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> method(User user) {
  ...
}
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@ModelAttribute</span> User user) {
  ...
}
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@ModelAttribute</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">currentUser</span><span class="delimiter">&quot;</span></span>) User user) {
  ...
}

<span class="annotation">@ModelAttribute</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="predefined-type">String</span> getUserId(HttpServletRequest request) {
  <span class="predefined-type">Object</span> userId = request.getAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>);
  <span class="keyword">return</span> (<span class="predefined-type">String</span>) userId;
}
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@ModelAttribute</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> userId) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="request-body"><a class="link" href="#request-body">1.13. @RequestBody</a></h3><div class="ulist"><ul><li><p>payload를 mapping</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// curl -X POST -H 'Content-Type: application/json' -d '{ &quot;idx&quot;: 1, &quot;id&quot;: &quot;user&quot; }'</span>
<span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@RequestBody</span> User user) {
  ..
}</code></pre></div></div></div><div class="sect2"><h3 id="value"><a class="link" href="#value">1.14. @Value</a></h3><div class="ulist"><ul><li><p>프로퍼티값<li><p>상수 값<li><p>특정 메소드를 호출한 결과 값</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Value</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#{systemProperties['user.home']}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> <span class="predefined-type">String</span> userHome;</code></pre></div></div></div><div class="sect2"><h3 id="model-and-view"><a class="link" href="#model-and-view">1.15. ModelAndView</a></h3><div class="ulist"><ul><li><p>반환하는 객체와 뷰를 지정</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> ModelAndView index(Device device) {
  ModelAndView mav = <span class="keyword">new</span> ModelAndView();

  mav.addObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">isMobileDevice</span><span class="delimiter">&quot;</span></span>, device.isMobile());
  mav.setViewName(<span class="string"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span>);

  <span class="keyword">return</span> mav;
}</code></pre></div></div></div><div class="sect2"><h3 id="view"><a class="link" href="#view">1.16. 뷰 지정</a></h3><div class="ulist"><ul><li><p>String으로 뷰 이름을 지정 가능<li><p>void로 사용할 시 url을 통해 view 지정<li><p>이외 모델 사용시 url을 통해 지정</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> method(Model model) {
  ...
  return <span class="string"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span>;
}

<span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/index</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> method(Model model) {
  ...
}

<span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/index</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> User method() {
  ...
}

<span class="directive">public</span> <span class="predefined-type">String</span> method(RedirectAttributes redirectAttributes) {
  <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">redirect:/index</span><span class="delimiter">&quot;</span></span>;
}</code></pre></div></div></div><div class="sect2"><h3 id="response-body"><a class="link" href="#response-body">1.17. @ResponseBody</a></h3><div class="ulist"><ul><li><p>반환값을 응답 본문으로 사용</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ResponseBody</span>
<span class="directive">public</span> <span class="predefined-type">String</span> method() {
  <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello&lt;/body&gt;&lt;/html&gt;</span><span class="delimiter">&quot;</span></span>
}</code></pre></div></div></div><div class="sect2"><h3 id="sessionattributes"><a class="link" href="#sessionattributes">@SessionAttributes</a></h3><div class="ulist"><ul><li><p>모델 객체를 세션에 저장해서 사용할 수 있도록 함<li><p>세션의 값을 사용</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Controller</span>
<span class="annotation">@SessionAttributes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> {
  ...

  <span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">public</span> <span class="predefined-type">String</span> method(<span class="annotation">@ModelAttribute</span> User user) {
    ...
  }
}</code></pre></div></div></div><div class="sect2"><h3 id="session-status"><a class="link" href="#session-status">1.18. SessionStatus</a></h3><div class="ulist"><ul><li><p>세션을 관리<li><p>사용이 완료된 세션을 제거하지 않으면 메모리 누수가 발생할 수 있으므로 사용 후 제거해야함</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> method(SessionStatus sessionStatus) {
  sessionStatus.setComplete();
}</code></pre></div></div></div><div class="sect2"><h3 id="binder"><a class="link" href="#binder">1.19. @InitBinder, WebDataBinder</a></h3><div class="ulist"><ul><li><p>메소드 파라미터를 바인딩 및 검증<li><p>allowedFields, disallowedFields</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> AgentValidator agentValidator;

<span class="annotation">@InitBinder</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">agent</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> initAgentBinder(WebDataBinder dataBinder) {
  dataBinder.setValidator(agentValidator);
}</code></pre></div></div></div><div class="sect2"><h3 id="validator"><a class="link" href="#validator">1.20. Validator</a></h3><div class="ulist"><ul><li><p>@ModelAttribute로 바인딩되는 모델의 데이터 검</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">AgentValidator</span> <span class="directive">implements</span> <span class="predefined-type">Validator</span> {
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> supports(<span class="predefined-type">Class</span>&lt;?&gt; clazz) {
    <span class="keyword">return</span> (<span class="predefined-type">String</span>.class.isAssignableFrom(clazz));
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> validate(<span class="predefined-type">Object</span> target, Errors errors) {
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; agentList = <span class="predefined-type">Arrays</span>.asList(OS_ANDROID.getName(), OS_IOS.getName());
    ErrorCode error = <span class="predefined-constant">null</span>;

    <span class="predefined-type">String</span> agent = (<span class="predefined-type">String</span>) target;

    <span class="keyword">if</span> (! agentList.contains(agent)) {
      error = ErrorCode.UnsupportedAgent;
    }

    <span class="keyword">if</span> (error != <span class="predefined-constant">null</span>) {
      errors.reject(error.getCode(), error.getMessage());
    }
  }
}</code></pre></div></div></div><div class="sect2"><h3 id="valid"><a class="link" href="#valid">1.21. @Valid</a></h3><div class="ulist"><ul><li><p>@ModelAttribute의 값을 검증</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/{agent}</span><span class="delimiter">&quot;</span></span>, method = RequestMethod.GET)
<span class="directive">public</span> JigjakVersion getVersion(<span class="annotation">@ModelAttribute</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">agent</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@Valid</span> <span class="predefined-type">String</span> agent, BindingResult bindingResult) {
  ...
}</code></pre></div></div></div><div class="sect2"><h3 id="errors-binding-result"><a class="link" href="#errors-binding-result">1.22. Errors, BindingResult</a></h3><div class="ulist"><ul><li><p>@ModelAttribute의 Validation 결과를 담음</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> method(<span class="annotation">@ModelAttribute</span> User, BindingResult result) {
  <span class="keyword">if</span> (bindingResult.hasErrors()) {
    ObjectError error = bindingResult.getAllErrors().get(<span class="integer">0</span>);

    <span class="keyword">throw</span> <span class="keyword">new</span> ResourceNotFoundException(UnsupportedAgent);
  }
}</code></pre></div></div></div><div class="sect2"><h3 id="converter"><a class="link" href="#converter">1.23. Converter</a></h3><div class="ulist"><ul><li><p>데이터 바인딩 시 데이터를 변환<li><p>ex) String &#8594; 클래스<li><p>클래스 &#8594; String</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">Converters</span>&lt;S, T&gt; {
  T convert(S source);
}</code></pre></div></div></div><div class="sect2"><h3 id="conversion-service"><a class="link" href="#conversion-service">1.24. ConversionService</a></h3><div class="ulist"><ul><li><p>컨트롤러 값 바인딩 시 데이터 타입 변환에 사용<li><p>InitBinder 혹은 ConfigurableWebBindingInitializer를 통해 등록</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.context.support.ConversionServiceFactoryBean</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">converters</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;set&gt;</span>
      <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kr.pe.nuti.converter.CustomConverter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/set&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre></div></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Autowired</span>
<span class="directive">private</span> ConversionService conversionService;

<span class="annotation">@InitBinder</span>
<span class="directive">public</span> <span class="type">void</span> initBinder(WEbDataBinder dataBinder) {
  dataBinder.setConversionService(<span class="local-variable">this</span>.conversionService);
}</code></pre></div></div></div><div class="sect2"><h3 id="formatter"><a class="link" href="#formatter">1.25. Formatter, FormattingConversionService</a></h3><div class="ulist"><ul><li><p>오브젝트 &gt; 문자열<li><p>문자열 &gt; 오브젝트<li><p>locale이 포함<li><p>html</ul></div></div><div class="sect2"><h3 id="number-format"><a class="link" href="#number-format">1.26. @NumberFormat</a></h3><div class="ulist"><ul><li><p>숫자, 문자 포맷</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@NumberFormat</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">$###,##0.00</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">BigDecimal</span> price;</code></pre></div></div></div><div class="sect2"><h3 id="date-time-format"><a class="link" href="#date-time-format">1.27. @DateTimeFormat</a></h3><div class="ulist"><ul><li><p>날짜, 문자 포맷</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DateTimeFormat</span>(pattern=<span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy/MM/dd</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Date</span> date;</code></pre></div></div></div><div class="sect2"><h3 id="message-converter"><a class="link" href="#message-converter">1.28. Message Converter</a></h3><div class="ulist"><ul><li><p>요청본문과 응답 본문을 다룸</ul></div><div class="sect3"><h4 id="bytearrayhttpmessageconverter"><a class="link" href="#bytearrayhttpmessageconverter">1.28.1. ByteArrayHttpMessageConverter</a></h4><div class="ulist"><ul><li><p>byte[] 지원<li><p>application/octet-stream</ul></div></div><div class="sect3"><h4 id="stringhttpconverter"><a class="link" href="#stringhttpconverter">1.28.2. StringHttpConverter</a></h4><div class="ulist"><ul><li><p>xml, json같이 문서 포맷이 있다면 적절한 파서를 붙여서 활용할 수 있음</ul></div></div><div class="sect3"><h4 id="formhttpmessageconverter"><a class="link" href="#formhttpmessageconverter">1.28.3. FormHttpMessageConverter</a></h4><div class="ulist"><ul><li><p>application/x-www-form-urlencoded</ul></div></div><div class="sect3"><h4 id="sourcehttpmessageconverter"><a class="link" href="#sourcehttpmessageconverter">1.28.4. SourceHttpMessageConverter</a></h4><div class="ulist"><ul><li><p>application/json<li><p>application/*+xml<li><p>text/xml</ul></div></div><div class="sect3"><h4 id="jaxb2rootelementhttpmessageconverter"><a class="link" href="#jaxb2rootelementhttpmessageconverter">1.28.5. Jaxb2RootElementHttpMessageConverter</a></h4><div class="ulist"><ul><li><p>JAXB2의 @XmlRootElement, @XmlType이 붙은 클래스를 이용해 XML과 오브젝트를 변환할 때 사용</ul></div></div><div class="sect3"><h4 id="marshallinghttpmessageconverter"><a class="link" href="#marshallinghttpmessageconverter">1.28.6. MarshallingHttpMessageConverter</a></h4><div class="ulist"><ul><li><p>Marshaller와 UnMarshaller<li><p>XML문서와 자바 오브젝트 사이의 변환을 지원</ul></div></div><div class="sect3"><h4 id="mappingjacksonhttpmessageconverter"><a class="link" href="#mappingjacksonhttpmessageconverter">1.28.7. MappingJacksonHttpMessageConverter</a></h4><div class="ulist"><ul><li><p>Jackson ObjectMapper를 통해서 JSON 문서와 자바오브젝트 변환을 지원</ul></div></div></div><div class="sect2"><h3 id="mvc-annotation-driven"><a class="link" href="#mvc-annotation-driven">1.29. mvc:annotation-driven</a></h3><div class="ulist"><ul><li><p>MVC에서 지원하는 빈을 자동으로 등록<li><p>라이브러리의 존재 여부를 파악해서 자동으로 관련 빈을 등록</ul></div><div class="sect3"><h4 id="defaultannotationhandlermapping"><a class="link" href="#defaultannotationhandlermapping">1.29.1. DefaultAnnotationHandlerMapping</a></h4><div class="ulist"><ul><li><p>@RequestMapping을 이용한 핸들러 매핑 전략을 등록</ul></div></div><div class="sect3"><h4 id="annotationmethodhandleradapter"><a class="link" href="#annotationmethodhandleradapter">1.29.2. AnnotationMethodHandlerAdapter</a></h4><div class="ulist"><ul><li><p>DispatcherServlet이 자동으로 등록해주는 디폴트 핸들러 어댑터</ul></div></div><div class="sect3"><h4 id="configurablewebbindinginitializer"><a class="link" href="#configurablewebbindinginitializer">1.29.3. ConfigurableWebBindingInitializer</a></h4><div class="ulist"><ul><li><p>모든 컨트롤러 메소드에 자동으로 적용되는 WebDataBinder 초기화용 빈을 등록</ul></div></div><div class="sect3"><h4 id="메세지_컨버터"><a class="link" href="#메세지_컨버터">1.29.4. 메세지 컨버터</a></h4><div class="ulist"><ul><li><p>기본 컨버터와 라이브러리 유무에 따라 Jaxb2RootElementHttpMessageConverter, MappingJacksonHttpMessageConverter 등록</ul></div></div><div class="sect3"><h4 id="validator_2"><a class="link" href="#validator_2">1.29.5. validator</a></h4><div class="ulist"><ul><li><p>모든 컨테이너에 일괄 적용하는 validator 등록</ul></div></div><div class="sect3"><h4 id="conversion_service"><a class="link" href="#conversion_service">1.29.6. conversion-service</a></h4><div class="ulist"><ul><li><p>Default: FormattingConversionServiceFactoryBean</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;mvc:annotation-driven</span> <span class="attribute-name">conversion-service</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myConversionService</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

<span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myConversionService</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FormattingConversionServiceFactoryBean</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">converters</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre></div></div></div></div><div class="sect2"><h3 id="interceptors"><a class="link" href="#interceptors">1.30. Interceptors</a></h3><div class="ulist"><ul><li><p>컨트롤러 전후로 작업할 내용 지정</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;mvc:interceptors&gt;</span>
  <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kr.pe.nuti.GlobalInterceptor</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/mvc:intercptors&gt;</span></code></pre></div></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;mvc:interceptors&gt;</span>
  <span class="tag">&lt;mvc:interceptor&gt;</span>
    <span class="tag">&lt;mvc:mapping</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/home/*</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kr.pe.nuti.HomeInterceptor</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/mvc:interceptor&gt;</span>
<span class="tag">&lt;/mvc:interceptors&gt;</span></code></pre></div></div></div><div class="sect2"><h3 id="view-controller"><a class="link" href="#view-controller">1.31. view-controller</a></h3><div class="ulist"><ul><li><p>뷰로 매핑만 할 경우</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;mvc:view-controller</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">view-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/index</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre></div></div><div style="page-break-after: always;"></div></div></div></div><div class="sect1"><h2 id="mvc-extension"><a class="link" href="#mvc-extension">2. MVC 확장 포인트</a></h2><div class="sectionbody"><div class="sect2"><h3 id="session-attrubute-store"><a class="link" href="#session-attrubute-store">2.1. SessionAttributeStore</a></h3><div class="ulist"><ul><li><p>@SessionAttribute 에 의해 지정된 모델은 세션에 저장된<li><p>세션은 메모리에 저장됨<li><p>메모리 문제를 해결하기 위해 별도의 저장소를 사용해서 사용할 수 있음</ul></div></div><div class="sect2"><h3 id="web-argument-resolver"><a class="link" href="#web-argument-resolver">2.2. WebArgumentResolver</a></h3><div class="ulist"><ul><li><p>어플리케이션에 특화된 컨트롤러 파라미터 타입을 추가할 수 있음<li><p>암호화된 정보를 복호화해서 파라미터로 넘김</ul></div></div><div class="sect2"><h3 id="model-and-view-resolver"><a class="link" href="#model-and-view-resolver">2.3. ModelAndViewResolver</a></h3><div class="ulist"><ul><li><p>컨트롤러 메소드의 리턴 타입과 메소드 정보, 어노테이션 정보등을 통해 ModelAndView를 생성<li><p>활용도는 낮음</ul></div></div><div class="sect2"><h3 id="handler-method-return-value-handler"><a class="link" href="#handler-method-return-value-handler">2.4. HandlerMethodReturnValueHandler</a></h3><div class="ulist"><ul><li><p>리턴 값을 처리<li><p>RequestMaiingHalderAdapter의 customReturnValueHandlers 프로퍼티에 주입</ul></div><div style="page-break-after: always;"></div></div></div></div><div class="sect1"><h2 id="url-resource-manage"><a class="link" href="#url-resource-manage">3. url과 리소스 관리</a></h2><div class="sectionbody"><div class="sect2"><h3 id="mvc-default-servlet-handler"><a class="link" href="#mvc-default-servlet-handler">3.1. &lt;mvc:default-servlet-handler /&gt;</a></h3><div class="ulist"><ul><li><p>servlet path가 /일 경우 모든 요청이 DispatcherServlet으로 전달됨<li><p>이때 함께 사용해야됨<li><p>@RequestMapping 정보에 의존<li><p>매핑된 정보를 찾을 수 없을 시 가장 우선순위가 낮은 디폴트 서블릿 매핑 전략을 통해 컨테이너가 제공하는 디폴트 서블릿으로 요청이 포워딩<li><p>동작원리는 이해할 필요는 없고 같이 사용해야된다는 것만 기억</ul></div></div><div class="sect2"><h3 id="url-resource"><a class="link" href="#url-resource">3.2. &lt;url:resource /&gt;</a></h3><div class="ulist"><ul><li><p>요청에 따라 리소스 경로를 지정</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;mvc:resources</span> <span class="attribute-name">mapping</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/resources/**</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/resources/</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre></div></div></div></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></article><aside class="author" role="complementary"><h2>About</h2><img class="me" alt="Hyeonil Jeong" src="/public/img/profile2.jpg" srcset="/public/img/profile2.jpg 2x" /><p><strong>Name</strong>: Hyeonil Jeong<p><strong>Birth</strong>: 1990-**-**<p><strong>E-mail</strong>: ^_^<p><strong>Job</strong>: Web Back-end Programmer<p><strong>Interest</strong>: Java, Test, Specification, Architecture, Clean Code</aside><aside class="related" role="complementary"><h2>Related Posts</h2><ul class="related-posts"><li> <a href="/2019/04/28/spring-camp-2019/"> <span>SpringCamp 2019 참석 후기</span> <small><time datetime="2019-04-28T00:00:00+00:00"> 04/28/19 </time></small> </a><li> <a href="/2018/11/08/spring-one/"> <span>SpringOne Tour 2018 Memo</span> <small><time datetime="2018-11-08T00:00:00+00:00"> 11/08/18 </time></small> </a><li> <a href="/2018/06/13/spring-aop/"> <span>Spring AOP(Aspect Oriented Programming)</span> <small><time datetime="2018-06-13T00:00:00+00:00"> 06/13/18 </time></small> </a></ul></aside><aside class="comments" role="complementary"><h2>Comments</h2><div id="disqus_thread"></div><script> var disqus_config = function () { this.page.url = 'https://blog.nuti.pe.kr/2018/10/21/spring-mvc/'; this.page.identifier = '/2018/10/21/spring-mvc'; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://nuti01.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></aside></main><div id="_backdrop" class="backdrop"></div><header id="_sidebar" class="sidebar" role="banner"><div id="_asidebar" class="container sidebar-sticky"><div class="sidebar-about"><h1 class="font-accent"><a href="/">Hyeonil's Note</a></h1><p>Hyeonil’s Dev Note</div><nav class="sidebar-nav font-accent" role="navigation"><ul><li> <a class="sidebar-nav-item " href="/tag/all/">All</a><li> <a class="sidebar-nav-item " href="/tag/java/">Java</a><li> <a class="sidebar-nav-item " href="/tag/spring/">Spring</a><li> <a class="sidebar-nav-item " href="/tag/spec/">Specification</a><li> <a class="sidebar-nav-item " href="/tag/architecture/">Architecture</a><li> <a class="sidebar-nav-item " href="/tag/diary/">Diary</a><li> <a class="sidebar-nav-item " href="/tag/etc/">Etc</a><li> <a class="sidebar-nav-item " href="/about/">About</a></ul></nav><div class="sidebar-social"><ul><li> <a href="https://github.com/hyeonil"> <span class="fa fa-github"></span> <span class="sr-only">github</span> </a><li> <a href="https://nuti.tistory.com"> <span class="fa fa-external-link"></span> <span class="sr-only">blog</span> </a></ul></div></div></header><!--[if gt IE 8]><!----> <script>loadJSDeferred('/public/js/hydejack.min.js')</script> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|PT+Serif:400,400italic,700,700italic'.split('|') }, custom: { families: ['icomoon'], urls: ['/public/css/font-awesome.min.css'] }, classes: false, events: false }; </script> <script>loadJSDeferred('https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js')</script> <script> window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga('create', 'UA-88066046-1', 'auto'); ga('send', 'pageview'); </script> <script>loadJSDeferred('https://www.google-analytics.com/analytics.js')</script> <!--<![endif]-->

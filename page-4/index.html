<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Blog &middot; Hyeonil's Note</title><!--[if gt IE 8]><!----><style> article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html,body{margin:0;padding:0}html{line-height:1.65}body{color:#515151;background-color:#fff}a{text-decoration:none}img{display:block;max-width:100%;margin:0 0 1rem}img.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem);margin-left:calc(-1rem);margin-right:calc(-1rem)}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:600;line-height:1.25;color:#313131;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.25rem;font-weight:300}ul,ol,dl{margin-top:0;margin-bottom:1rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.page-title,.post-title{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.25rem;margin-bottom:1rem;color:#9a9a9a;font-weight:bold}.related{padding-top:2rem;padding-bottom:2rem}.related-posts{padding-left:0;list-style:none}.related-posts>li{margin-top:1rem}.related-posts>li>*{font-weight:normal}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9;margin-left:-1rem;margin-right:-1rem}body{padding-left:0.5rem}@media (min-width: 48em){html{font-size:16px}body{padding-left:0}}@media (min-width: 58em){html{font-size:18px}}.sr-only{display:none}.backdrop{display:none}.sidebar{position:relative;z-index:4;padding:2rem 1rem;color:rgba(255,255,255,0.75);background-color:#202020;text-align:left;background-size:cover;background-position:center center;min-height:640px;min-height:100vh;margin-left:-0.5rem}.sidebar a{color:#fff}.sidebar ul{list-style:none;padding-left:0}.sidebar-sticky{position:absolute;right:1rem;bottom:1rem;left:1rem}.sidebar-about>h1{color:#fff;font-size:2rem}.sidebar-nav-item{font-weight:bold;display:block;line-height:1.75;padding:.25rem .1rem;border-top:1px solid rgba(255,255,255,0.23)}.sidebar-social>ul{min-height:3.5rem}.sidebar::before{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(32,32,32,0.33);background:-moz-linear-gradient(bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%);background:-webkit-linear-gradient(bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%);background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%)}@media (min-width: 48em){.sidebar{position:fixed;top:0;left:0;bottom:0;width:18rem;margin-left:0}}.menu{display:block;padding:1.25rem 1.5rem;color:#9a9a9a;border-bottom:none;position:fixed;top:0;left:0;z-index:2}@media (min-width: 48em){.menu{position:absolute;left:-9999px}}@media (min-width: 48em){.menu:focus{left:19.5rem}}@media (min-width: 64em){.menu:focus{left:21.5rem}}.content{padding-top:4rem;padding-bottom:4rem}@media (min-width: 48em){.content{max-width:38rem;margin-left:20rem;margin-right:2rem;border-left:none}}@media (min-width: 64em){.content{margin-left:22rem;margin-right:4rem}}.me{float:right;width:6.5rem;margin-top:-4.8rem;margin-left:1rem;border-radius:100%;position:relative}@media (min-width: 38em){.me{width:7rem;margin-top:-5.05rem}}@media (min-width: 48em){.me{width:6.5rem;margin-top:-4.8rem}}@media (min-width: 58em){.me{width:7rem;margin-top:-5.05rem}}</style><noscript><link rel="stylesheet" href="/public/css/non-essentials.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|PT+Serif:400,400italic,700,700italic"> </noscript><link rel="preload" href="/public/css/non-essentials.css" as="style" onload="this.rel='stylesheet'"><style> html { font-family: "PT Serif", Georgia, serif; } :focus { outline-color: #A85641; } .font-accent { font-family: "Roboto Slab", "PT Serif", Georgia, serif; } .content a, .related-posts li a:hover { color: #A85641; } ::selection { color: #fff; background: #A85641; } ::-moz-selection { color: #fff; background: #A85641; } .sidebar { background-image: url('/public/img/side.jpg'); }</style><!--<![endif]--><link rel="canonical" href="https://blog.nuti.pe.kr/page-4/" /><link rel="alternate" type="application/atom+xml" title="Hyeonil's Note Atom Feed" href="/atom.xml"><link rel="stylesheet" href="/public/css/asciidoctor.css"><link rel="stylesheet" href="/public/css/coderay.css"><link rel="stylesheet" href="/public/css/font-awesome.min.css"><link rel="stylesheet" href="/public/css/foundation.min.css"><link rel="stylesheet" href="/public/css/normalize.css"><link rel="stylesheet" href="/public/css/custom.css"> <script>!function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n.isReady=!1,n.loadJSDeferred=function(a,r){function d(){n.isReady=!0;var d=e.createElement("script");d.src=a,r&&(("onload"in d?t:o)(d,r),d.onload||t(d,r));var i=e.getElementsByTagName("script")[0];i.parentNode.insertBefore(d,i)}n.isReady?d():n.addEventListener?n.addEventListener("load",d,!1):n.attachEvent?n.attachEvent("onload",d):n.onload=d}}(window,document); </script> <!--[if lt IE 9]> <script src="https://unpkg.com/html5shiv/dist/html5shiv.min.js"></script> <![endif]--><body> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu" href="#_asidebar"> <span>☰</span> <span class="sr-only">Menu</span> </a><main class="content container" role="main"><article id="post-2018/02/18/docker-compose" class="post" role="article"><h1 class="post-title"> <a href="/2018/02/18/docker-compose/"> docker-compose </a></h1><div class="post-date"> <time datetime="2018-02-18T00:00:00+00:00">2018/02/18/</time> <span>on <a href="/tag/etc/">Etc</a></span></div><hr/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="sect1"><h2 id="docker_compose"><a class="link" href="#docker_compose">1. docker-compose?</a></h2><div class="sectionbody"><div class="paragraph"><p><code>Docker Compose</code>는 하나의 설정으로 여러 컨테이너를 정의하고 실행할 수 있도록 도와주는 툴이다. 하나의 명령어로 여러 컨테이너를 띄워서 어플리케이션을 실행할 수 있다.</div><div class="ulist"><ul><li><p>사용 환경<div class="ulist"><ul><li><p>개발<li><p>테스트<li><p>스테이징</ul></div></ul></div></div></div><div class="sect1"><h2 id="options"><a class="link" href="#options">2. Options</a></h2><div class="sectionbody"><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 20%;"><col style="width: 80%;"><thead><tr><th class="tableblock halign-left valign-top">Option<th class="tableblock halign-left valign-top">Description<tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">image<td class="tableblock halign-left valign-top"><p class="tableblock">사용할 이미지의 태그나 ID를 명시<tr><td class="tableblock halign-left valign-top"><p class="tableblock">build<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Docker</code>파일이 있는 디렉토리의 경로<tr><td class="tableblock halign-left valign-top"><p class="tableblock">dockerfile<td class="tableblock halign-left valign-top"><p class="tableblock">기본 <code>Dockerfile</code>명이 아닐 경우 여기에 이름을 명시<tr><td class="tableblock halign-left valign-top"><p class="tableblock">command<td class="tableblock halign-left valign-top"><p class="tableblock">기본 <code>command</code>를 지정<tr><td class="tableblock halign-left valign-top"><p class="tableblock">links<td class="tableblock halign-left valign-top"><p class="tableblock">컨테이너를 다른 서비스와 연결. 연결하려는 서비스의 이름이나 별칭을 작성하면 컨테이너의 <code>/etc/hosts</code> 파일에 그 내용이 추기<tr><td class="tableblock halign-left valign-top"><p class="tableblock">external_links<td class="tableblock halign-left valign-top"><p class="tableblock"><code>links</code>와 비슷하지만 <code>compose</code>외부의 서비스와 연결을 위해 사용<tr><td class="tableblock halign-left valign-top"><p class="tableblock">extra_hosts<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/hosts</code>에 외부 호스트 정보를 추가<tr><td class="tableblock halign-left valign-top"><p class="tableblock">ports<td class="tableblock halign-left valign-top"><p class="tableblock">호스트포트:컨테이너포트 식으로 호스트와 <code>컨테이너</code>의 포트를 포딩한다.<tr><td class="tableblock halign-left valign-top"><p class="tableblock">expose<td class="tableblock halign-left valign-top"><p class="tableblock">호스트에는 노출하지 않고 연결된 서비스끼리만 접근 가능한 포트를 명<tr><td class="tableblock halign-left valign-top"><p class="tableblock">volumes<td class="tableblock halign-left valign-top"><p class="tableblock">볼륨으로 마운트할 디렉토리를 명<tr><td class="tableblock halign-left valign-top"><p class="tableblock">volumes_from<td class="tableblock halign-left valign-top"><p class="tableblock">다른 서비스나 <code>컨테이너</code>의 볼륨 전체를 마운트<tr><td class="tableblock halign-left valign-top"><p class="tableblock">environment<td class="tableblock halign-left valign-top"><p class="tableblock">환경 변수를 명시<tr><td class="tableblock halign-left valign-top"><p class="tableblock">env_file<td class="tableblock halign-left valign-top"><p class="tableblock">환경 변수를 파일에서 추<tr><td class="tableblock halign-left valign-top"><p class="tableblock">extends<td class="tableblock halign-left valign-top"><p class="tableblock">다른 <code>compose</code> 설정을 현재 파일에 가져와 사용<tr><td class="tableblock halign-left valign-top"><p class="tableblock">labels<td class="tableblock halign-left valign-top"><p class="tableblock"><code>컨테이너</code>에 <code>docker label</code>을 이용해서 메타데이터를 추가<tr><td class="tableblock halign-left valign-top"><p class="tableblock">container_name<td class="tableblock halign-left valign-top"><p class="tableblock"><code>컨테이너</code> 이름을 지정<tr><td class="tableblock halign-left valign-top"><p class="tableblock">log driver<td class="tableblock halign-left valign-top"><p class="tableblock"><code>컨테이너</code>에서 사용할 로깅 드라이버를 명시<tr><td class="tableblock halign-left valign-top"><p class="tableblock">net<td class="tableblock halign-left valign-top"><p class="tableblock">네트워킹 모드를 지정. <code>docker</code>의 <code>-net</code> 옵션과 동일<tr><td class="tableblock halign-left valign-top"><p class="tableblock">pid<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PID</code> 모드를 호스트 <code>PID</code>모드로 설정. 호스트와 <code>컨테이너</code> 운영체제가 같은 <code>PID</code> 주소 공간을 공유<tr><td class="tableblock halign-left valign-top"><p class="tableblock">dns<td class="tableblock halign-left valign-top"><p class="tableblock"><code>컨테이너</code>가 사용할 커스텀 <code>DNS</code>서버를 설정<tr><td class="tableblock halign-left valign-top"><p class="tableblock">dns_search<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DNS</code>검색 도메인을 지정<tr><td class="tableblock halign-left valign-top"><p class="tableblock">cap_add<td class="tableblock halign-left valign-top"><p class="tableblock"><code>컨테이너</code>의 시스템에 관한 권한을 추가<tr><td class="tableblock halign-left valign-top"><p class="tableblock">cap_drop<td class="tableblock halign-left valign-top"><p class="tableblock"><code>컨테이너</code>의 시스템에 관한 권한을 삭제<tr><td class="tableblock halign-left valign-top"><p class="tableblock">devices<td class="tableblock halign-left valign-top"><p class="tableblock">디바이스 매핑 목록. <code>docker</code>의 <code>--devices</code>와 동일</table></div></div><div class="sect1"><h2 id="example"><a class="link" href="#example">3. Example</a></h2><div class="sectionbody"><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="yml"><span class="key">version</span>: <span class="string"><span class="content">'3'</span></span>
<span class="key">services</span>:
  <span class="key">example</span>:
    <span class="key">build</span>:
      <span class="key">context</span>: <span class="string"><span class="content">./docker</span></span>
      <span class="key">dockerfile</span>: <span class="string"><span class="content">Dockerfile</span></span>
    <span class="key">image</span>: <span class="string"><span class="content">example:latest</span></span>
    <span class="key">environment</span>:
      <span class="key">STATIC_DOMAIN</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://static.nuti.pe.kr</span><span class="delimiter">&quot;</span></span>
      <span class="key">VM_XMS</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">256m</span><span class="delimiter">&quot;</span></span>
      <span class="key">VM_XMX</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1024m</span><span class="delimiter">&quot;</span></span>
      <span class="key">VM_XX_NEW_SIZE</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">384m</span><span class="delimiter">&quot;</span></span>
      <span class="key">VM_XX_NEW_PERM_SIZE</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">128m</span><span class="delimiter">&quot;</span></span>
      <span class="key">DB_HOST</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">db.nuti.pe.kr</span><span class="delimiter">&quot;</span></span>
      <span class="key">DB_NAME</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">blog</span><span class="delimiter">&quot;</span></span>
      <span class="key">DB_USERNAME</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">nuti</span><span class="delimiter">&quot;</span></span>
      <span class="key">DB_PASSWORD</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">db_pw</span><span class="delimiter">&quot;</span></span>
    <span class="key">volumes</span>:
      - <span class="string"><span class="content">./logs:/tomcat/logs</span></span>
    <span class="key">ports</span>:
      - <span class="string"><span class="delimiter">&quot;</span><span class="content">80:80</span><span class="delimiter">&quot;</span></span>
    <span class="key">network_mode</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bridge</span><span class="delimiter">&quot;</span></span></code></pre></div></div></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></article><br/><article id="post-2018/02/01/maven" class="post" role="article"><h1 class="post-title"> <a href="/2018/02/01/maven/"> Maven </a></h1><div class="post-date"> <time datetime="2018-02-01T00:00:00+00:00">2018/02/01/</time> <span>on <a href="/tag/java/">Java</a><span>, </span><a href="/tag/etc/">Etc</a></span></div><hr/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>빌드 툴로 많이 알려진 <code>메이븐</code>은 빌드 툴이라기 보다는 <code>프로젝트 관리 툴</code>이라고 지칭해야 한다. <code>메이븐</code>은 소스코드로부터 배포 가능한 산출물을 빌드할 뿐만 아니라, 의존성 관리, 패키징, 문서화, 자동화 테스트, 각종 리포팅, 배포 등 여러가지 기능을 지원한다. <code>메이븐</code>에서 지원하는 기능을 사용하기 위해서는 <code>pom.xml</code>이라는 파일에 사용할 기능에 대해서 명시해야한다. <code>메이븐</code>의 기본 구조는 아래와 같다.</div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tag">&lt;groupId&gt;</span>kr.pe.nuti<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;artifactId&gt;</span>build-deployment<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tag">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="tag">&lt;packaging&gt;</span>jar<span class="tag">&lt;/packaging&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
  <span class="tag">&lt;name&gt;</span>build deployment<span class="tag">&lt;/name&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
  <span class="tag">&lt;description&gt;</span>build and deployment description.<span class="tag">&lt;/description&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
  <span class="tag">&lt;url&gt;</span>https://blog.nuti.pe.kr<span class="tag">&lt;/url&gt;</span> <i class="conum" data-value="8"></i><b>(8)</b>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;url.github&gt;</span>https://github.com/hyeonil<span class="tag">&lt;/url.github&gt;</span>
    ...
  <span class="tag">&lt;/properties&gt;</span> <i class="conum" data-value="9"></i><b>(9)</b>

  <span class="tag">&lt;modules&gt;</span>...<span class="tag">&lt;/modules&gt;</span> <i class="conum" data-value="10"></i><b>(10)</b>
  <span class="tag">&lt;parent&gt;</span>...<span class="tag">&lt;/parent&gt;</span> <i class="conum" data-value="11"></i><b>(11)</b>
  <span class="tag">&lt;reporting&gt;</span>...<span class="tag">&lt;/reporting&gt;</span> <i class="conum" data-value="12"></i><b>(12)</b>
  <span class="tag">&lt;dependencies&gt;</span>...<span class="tag">&lt;/dependencies&gt;</span> <i class="conum" data-value="13"></i><b>(13)</b>
  <span class="tag">&lt;build&gt;</span>...<span class="tag">&lt;/build&gt;</span> <i class="conum" data-value="14"></i><b>(14)</b>
  <span class="tag">&lt;dependencyManagement&gt;</span>...<span class="tag">&lt;/dependencyManagement&gt;</span> <i class="conum" data-value="15"></i><b>(15)</b>
  <span class="tag">&lt;distributionManagement&gt;</span>...<span class="tag">&lt;/distributionManagement&gt;</span> <i class="conum" data-value="16"></i><b>(16)</b>
  <span class="tag">&lt;pluginManagement&gt;</span>...<span class="tag">&lt;/pluginManagement&gt;</span> <i class="conum" data-value="17"></i><b>(17)</b>
  <span class="tag">&lt;repositories&gt;</span>...<span class="tag">&lt;/repositories&gt;</span> <i class="conum" data-value="18"></i><b>(18)</b>
  <span class="tag">&lt;pluginRepositories&gt;</span>...<span class="tag">&lt;/pluginRepositories&gt;</span> <i class="conum" data-value="19"></i><b>(19)</b>
  <span class="tag">&lt;profiles&gt;</span>...<span class="tag">&lt;/profiles&gt;</span> <i class="conum" data-value="20"></i><b>(20)</b>
<span class="tag">&lt;/project&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>POM 모델의 버전을 명시한다.<tr><td><i class="conum" data-value="2"></i><b>2</b><td>프로젝트를 소유하는 그룹의 정보를 작성한다. 흔히 대표 도메인을 역순으로 작성한다.<tr><td><i class="conum" data-value="3"></i><b>3</b><td>프로젝트를 식별하는 유일한 아이디를 명시한다. 이 아이디는 프로젝트 소유 그룹내에서 유일해야 된다.<tr><td><i class="conum" data-value="4"></i><b>4</b><td>프로젝트 버전에 대해서 명시한다. 개발이 완료되지 않은 버전일 경우 <code>-SNAPSHOT</code>을 접미사로 사용해서 개발중임을 명시한다.<tr><td><i class="conum" data-value="5"></i><b>5</b><td>프로젝트를 어떻게 패키징할지 명시한다. 기본값으로 <code>jar</code>이고, <code>war</code>, <code>ear</code>, <code>pom</code>을 사용할 수 있다.<tr><td><i class="conum" data-value="6"></i><b>6</b><td>프로젝트의 이름을 작성한다.<tr><td><i class="conum" data-value="7"></i><b>7</b><td>프로젝트에 대해 설명하는 설명문을 작성한다.<tr><td><i class="conum" data-value="8"></i><b>8</b><td>프로젝트의 홈페이지를 작성한다.<tr><td><i class="conum" data-value="9"></i><b>9</b><td><code>pom.xml</code>내에서 사용할 프로퍼티(변수)에 대해서 명시한다.<tr><td><i class="conum" data-value="10"></i><b>10</b><td>다중 모듈 프로젝트일 경우 하위 프로젝트에 대하여 명시한다.<tr><td><i class="conum" data-value="11"></i><b>11</b><td>다중 모듈 프로젝트일 경우 상위 프로젝트에 대하여 명시한다.<tr><td><i class="conum" data-value="12"></i><b>12</b><td><code>site lifecycle</code>에서 실행할 <code>plugin</code>정보를 명시한다.<tr><td><i class="conum" data-value="13"></i><b>13</b><td>프로젝트에서 사용할 의존성에 대해서 명시한다.<tr><td><i class="conum" data-value="14"></i><b>14</b><td>프로젝트를 빌드하는 방법에 대하여 명시한다.<tr><td><i class="conum" data-value="15"></i><b>15</b><td>다중 모듈 프로젝트일 경우 상위 프로젝트의 의존성을 하위 프로젝트에서 사용할 수 있도록 명시한다.<tr><td><i class="conum" data-value="16"></i><b>16</b><td>프로젝트를 배포할 원격 서버에 대해서 명시한다.<tr><td><i class="conum" data-value="17"></i><b>17</b><td>다중 모듈 프로젝트일 경우 플러그인 설정을 하위 모듈에서도 사용할 수 있도록 한다.<tr><td><i class="conum" data-value="18"></i><b>18</b><td>프로젝트에서 의존성관계를 가지는 라이브러리를 명시한다.<tr><td><i class="conum" data-value="19"></i><b>19</b><td>플러그인을 받아오는 저장소 정보를 명시한다.<tr><td><i class="conum" data-value="20"></i><b>20</b><td>프로젝트 환경별로 달리 사용할 스크립트에 대해서 작성한다. <code>properties</code>, <code>dependencies</code>, <code>build</code>등을 재정의 할 수 있다.</table></div><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="maven-options"><a class="link" href="#maven-options">1. Options</a></h2><div class="sectionbody"><div class="sect2"><h3 id="maven-options-modules"><a class="link" href="#maven-options-modules">1.1. modules</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;modules&gt;</span>
  <span class="tag">&lt;module&gt;</span>child-project<span class="tag">&lt;/module&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/modules&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>하위 모듈 프로젝트의 <code>artifactId</code>를 명시한다.</table></div></div><div class="sect2"><h3 id="maven-options-parent"><a class="link" href="#maven-options-parent">1.2. parent</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;parent&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>kr.pe.nuti<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;artifactId&gt;</span>parent-project<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="tag">&lt;/parent&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>상위 프로젝트의 <code>groupId</code>를 명시한다.<tr><td><i class="conum" data-value="2"></i><b>2</b><td>상위 프로젝트의 <code>artifactId</code>를 명시한다.<tr><td><i class="conum" data-value="3"></i><b>3</b><td>상위 프로젝트의 <code>version</code>을 명시한다.</table></div></div><div class="sect2"><h3 id="maven-options-reporting"><a class="link" href="#maven-options-reporting">1.3. reporting</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;reporting&gt;</span>
  <span class="tag">&lt;plugins&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;plugin&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;version&gt;</span>2.9.1<span class="tag">&lt;/version&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;executions&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tag">&lt;execution&gt;</span>
          <span class="tag">&lt;id&gt;</span>attach-javadocs<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
          <span class="tag">&lt;configuration&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>

          <span class="tag">&lt;/configuration&gt;</span>
        <span class="tag">&lt;/execution&gt;</span>
      <span class="tag">&lt;/executions&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
  <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/reporting&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td><code>site lifecycle</code> 실행할 플러그인 목록<tr><td><i class="conum" data-value="2"></i><b>2</b><td>플러그인 <code>groupId</code><tr><td><i class="conum" data-value="3"></i><b>3</b><td>플러그인 <code>artifactId</code><tr><td><i class="conum" data-value="4"></i><b>4</b><td>플러그인 <code>version</code><tr><td><i class="conum" data-value="5"></i><b>5</b><td>플러그인 실행 환경 설정<tr><td><i class="conum" data-value="6"></i><b>6</b><td>플러그인 실행 환경 유일 id<tr><td><i class="conum" data-value="7"></i><b>7</b><td>플러그인 실행 환경 옵션 설정</table></div></div><div class="sect2"><h3 id="maven-options-dependencies"><a class="link" href="#maven-options-dependencies">1.4. dependencies</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
  <span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>log4j<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;artifactId&gt;</span>log4j<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;version&gt;</span>1.2.17<span class="tag">&lt;/version&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;exclusions&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;exclusion&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>javax.mail<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tag">&lt;artifactId&gt;</span>mail<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;exclusion&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>javax.jms<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jms<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;exclusion&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.sun.jdmk<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jmxtools<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/exclusion&gt;</span>
      <span class="tag">&lt;exclusion&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.sun.jmx<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jmxri<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;/exclusion&gt;</span>
    <span class="tag">&lt;/exclusions&gt;</span>
    <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
  <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>의존성 라이브러리의 <code>groupId</code>를 명시한다.<tr><td><i class="conum" data-value="2"></i><b>2</b><td>의존성 라이브러리의 <code>artifactId</code>를 명시한다.<tr><td><i class="conum" data-value="3"></i><b>3</b><td>의존성 라이브러리의 <code>version</code>을 명시한다.<tr><td><i class="conum" data-value="4"></i><b>4</b><td>의존성 라이브러리에 포함되는 의존성 중 제외할 라이브러리를 명시한다.<tr><td><i class="conum" data-value="5"></i><b>5</b><td>의존성 라이브러리에 포함되는 의존성 중 제외할 라이브러리의 <code>groupId</code>를 명시한다.<tr><td><i class="conum" data-value="6"></i><b>6</b><td>의존성 라이브러리에 포함되는 의존성 중 제외할 라이브러리의 <code>artifactId</code>를 명시한다.</table></div></div><div class="sect2"><h3 id="maven-options-build"><a class="link" href="#maven-options-build">1.5. build</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;build&gt;</span>
  <span class="tag">&lt;finalName&gt;</span>${artifactId}-${project.version}<span class="tag">&lt;/finalName&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;resources&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;resource&gt;</span>
      <span class="tag">&lt;directory&gt;</span>src/main/resources/${environment}<span class="tag">&lt;/directory&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/resource&gt;</span>
  <span class="tag">&lt;/resources&gt;</span>
  <span class="tag">&lt;testResources&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;testResource&gt;</span>
      <span class="tag">&lt;directory&gt;</span>src/main/webapp<span class="tag">&lt;/directory&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tag">&lt;/testResource&gt;</span>
  <span class="tag">&lt;/testResources&gt;</span>
  <span class="tag">&lt;plugins&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="tag">&lt;plugin&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="8"></i><b>(8)</b>
      <span class="tag">&lt;version&gt;</span>3.6.0<span class="tag">&lt;/version&gt;</span> <i class="conum" data-value="9"></i><b>(9)</b>
      <span class="tag">&lt;configuration&gt;</span> <i class="conum" data-value="10"></i><b>(10)</b>
        <span class="tag">&lt;source&gt;</span>${version.java}<span class="tag">&lt;/source&gt;</span>
        <span class="tag">&lt;target&gt;</span>${version.java}<span class="tag">&lt;/target&gt;</span>
        <span class="tag">&lt;encoding&gt;</span>UTF-8<span class="tag">&lt;/encoding&gt;</span>
        <span class="tag">&lt;useIncrementalCompilation&gt;</span>false<span class="tag">&lt;/useIncrementalCompilation&gt;</span>
        <span class="tag">&lt;compilerArgument&gt;</span>-Xlint:all<span class="tag">&lt;/compilerArgument&gt;</span>
        <span class="tag">&lt;showWarnings&gt;</span>true<span class="tag">&lt;/showWarnings&gt;</span>
        <span class="tag">&lt;showDeprecation&gt;</span>true<span class="tag">&lt;/showDeprecation&gt;</span>
      <span class="tag">&lt;/configuration&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
  <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/build&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>최종 빌드될 파일의 이름<tr><td><i class="conum" data-value="2"></i><b>2</b><td>리소스 설정<tr><td><i class="conum" data-value="3"></i><b>3</b><td>리소스로 사용할 디렉토리 지정<tr><td><i class="conum" data-value="4"></i><b>4</b><td>테스트 환경 리소스 설정<tr><td><i class="conum" data-value="5"></i><b>5</b><td>테스트 환경 리소스로 사용할 디렉토리 설정<tr><td><i class="conum" data-value="6"></i><b>6</b><td>플러그인 목록 설정. 각각의 플러그인별로 <code>execution</code>과 <code>configuration</code>이 다르니 각 플러그인별로 확인해야 한다.<tr><td><i class="conum" data-value="7"></i><b>7</b><td>플러그인 <code>groupId</code><tr><td><i class="conum" data-value="8"></i><b>8</b><td>플러그인 <code>artifactId</code><tr><td><i class="conum" data-value="9"></i><b>9</b><td>플러그인 <code>version</code><tr><td><i class="conum" data-value="10"></i><b>10</b><td>플러그인 실행 옵션. 각 플러그인별로 다르므로 플러그인 문서에서 확인해야 한다.</table></div></div><div class="sect2"><h3 id="maven-options-dependency-management"><a class="link" href="#maven-options-dependency-management">1.6. dependencyManagement</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencyManagement&gt;</span>
  <span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.apache.commons<span class="tag">&lt;/groupId&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;artifactId&gt;</span>commons-lang3<span class="tag">&lt;/artifactId&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;version&gt;</span>3.4<span class="tag">&lt;/version&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/dependency&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>
<span class="tag">&lt;/dependencyManagement&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>의존성 라이브러리의 <code>groupId</code><tr><td><i class="conum" data-value="2"></i><b>2</b><td>의존성 라이브러리의 <code>artifactId</code><tr><td><i class="conum" data-value="3"></i><b>3</b><td>의존성 라이버리리의 <code>version</code></table></div></div><div class="sect2"><h3 id="maven-options-distribution-management"><a class="link" href="#maven-options-distribution-management">1.7. distributionManagement</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;distributionManagement&gt;</span>
  <span class="tag">&lt;repository&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;id&gt;</span>maven-releases<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;name&gt;</span>release repository<span class="tag">&lt;/name&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;url&gt;</span>https://repo.maven/maven-release<span class="tag">&lt;/url&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="tag">&lt;/repository&gt;</span>
  <span class="tag">&lt;snapshotRepository&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tag">&lt;id&gt;</span>maven-snapshots<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="tag">&lt;name&gt;</span>snapshot repository<span class="tag">&lt;/name&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="tag">&lt;url&gt;</span>https://repo.maven/maven-snapshot<span class="tag">&lt;/url&gt;</span> <i class="conum" data-value="8"></i><b>(8)</b>
  <span class="tag">&lt;/snapshotRepository&gt;</span>
<span class="tag">&lt;/distributionManagement&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td><code>Release</code> 버전을 배포할 원격 저장소 정보<tr><td><i class="conum" data-value="2"></i><b>2</b><td>레파지토리 <code>id</code>. <code>settings.xml</code>에 작성한 id와 매핑된다.<tr><td><i class="conum" data-value="3"></i><b>3</b><td>레파지토리의 이름을 명시<tr><td><i class="conum" data-value="4"></i><b>4</b><td>레파지토리의 url을 명시<tr><td><i class="conum" data-value="5"></i><b>5</b><td><code>Snapshot</code> 버전을 배포할 원격 저장소 정보. 프로젝트 버전에 <code>-SNAPSHOT</code>이라는 접미어를 사용하면 여기에 배포된다.<tr><td><i class="conum" data-value="6"></i><b>6</b><td>레파지토리 <code>id</code>. <code>settings.xml</code>에 작성한 id와 매핑된다.<tr><td><i class="conum" data-value="7"></i><b>7</b><td>레파지토리의 이름을 명시<tr><td><i class="conum" data-value="8"></i><b>8</b><td>레파지토리의 url을 명시</table></div></div><div class="sect2"><h3 id="maven-options-plugin-management"><a class="link" href="#maven-options-plugin-management">1.8. pluginManagement</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;pluginManagement&gt;</span>
  <span class="tag">&lt;plugins&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/pluginmanagement&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>다중 모듈 프로젝트에서 하위 모듈에서도 사용할 플러그인 정보를 설정한다. 설정방법은 <code>plugin</code>설정 방법과 동일하다.</table></div></div><div class="sect2"><h3 id="maven-options-repositories"><a class="link" href="#maven-options-repositories">1.9. repositories</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;repositories&gt;</span>
  <span class="tag">&lt;repository&gt;</span>
    <span class="tag">&lt;id&gt;</span>maven-public<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;url&gt;</span>https://repo.maven/maven-public<span class="tag">&lt;/url&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;releases&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/releases&gt;</span>
    <span class="tag">&lt;snapshots&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="tag">&lt;updatePolicy&gt;</span>always<span class="tag">&lt;/updatePolicy&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="tag">&lt;/snapshots&gt;</span>
  <span class="tag">&lt;/repository&gt;</span>
  <span class="tag">&lt;repository&gt;</span>
    <span class="tag">&lt;id&gt;</span>in-project<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;name&gt;</span>custom jars<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;url&gt;</span>file://${project.basedir}/lib<span class="tag">&lt;/url&gt;</span> <i class="conum" data-value="9"></i><b>(9)</b>
  <span class="tag">&lt;/repository&gt;</span>
<span class="tag">&lt;/repositories&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>레파지토리 <code>id</code>. <code>settings.xml</code>에 작성한 id와 매핑된다.<tr><td><i class="conum" data-value="2"></i><b>2</b><td>레파지토리의 url을 명시<tr><td><i class="conum" data-value="3"></i><b>3</b><td><code>Release</code> 버전에 대한 옵션 설정<tr><td><i class="conum" data-value="4"></i><b>4</b><td><code>Release</code> 버전을 사용할 지 설정<tr><td><i class="conum" data-value="5"></i><b>5</b><td><code>Snapshot</code> 버전에 대한 옵션 설정<tr><td><i class="conum" data-value="6"></i><b>6</b><td><code>Snapshot</code> 버전을 사용할 지 설정<tr><td><i class="conum" data-value="7"></i><b>7</b><td><code>Snapshot</code> 버전의 업데이트 정책을 사용(같은 버전이 여러개가 있을 수 있으므로 업데이트를 어떻게할 지 지정한다.)<tr><td><i class="conum" data-value="8"></i><b>8</b><td>레파지토리 <code>id</code><tr><td><i class="conum" data-value="9"></i><b>9</b><td>로컬 레파지토리의 경로 지정</table></div></div><div class="sect2"><h3 id="maven-options-plugin-repositories"><a class="link" href="#maven-options-plugin-repositories">1.10. pluginRepositories</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;pluginRepositories&gt;</span>
    <span class="tag">&lt;pluginRepository&gt;</span>
        <span class="tag">&lt;id&gt;</span>central<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tag">&lt;name&gt;</span>plugin repository<span class="tag">&lt;/name&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;url&gt;</span>https://repo.maven/maven-public<span class="tag">&lt;/url&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="tag">&lt;layout&gt;</span>default<span class="tag">&lt;/layout&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="tag">&lt;snapshots&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
            <span class="tag">&lt;enabled&gt;</span>false<span class="tag">&lt;/enabled&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="tag">&lt;/snapshots&gt;</span>
        <span class="tag">&lt;releases&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
            <span class="tag">&lt;updatePolicy&gt;</span>never<span class="tag">&lt;/updatePolicy&gt;</span> <i class="conum" data-value="8"></i><b>(8)</b>
        <span class="tag">&lt;/releases&gt;</span>
    <span class="tag">&lt;/pluginRepository&gt;</span>
<span class="tag">&lt;/pluginRepositories&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td><code>plugin repository</code>의 id 지정<tr><td><i class="conum" data-value="2"></i><b>2</b><td><code>plugin repository</code>의 이름 지정<tr><td><i class="conum" data-value="3"></i><b>3</b><td><code>plugin repository</code>의 url 지정<tr><td><i class="conum" data-value="4"></i><b>4</b><td>저장소가 <code>artifact</code>를 찾고 저장하기 위해 사용하는 디렉토리 레이아웃. <code>legacy</code>와 <code>default</code>를 사용 가능<tr><td><i class="conum" data-value="5"></i><b>5</b><td><code>Snapshot</code>버전에 대한 설정<tr><td><i class="conum" data-value="6"></i><b>6</b><td><code>Snapshot</code>버전을 사용할 지 지정<tr><td><i class="conum" data-value="7"></i><b>7</b><td><code>Release</code>버전에 대한 설정<tr><td><i class="conum" data-value="8"></i><b>8</b><td><code>Release</code>버전의 업데이트 정책 설정</table></div></div><div class="sect2"><h3 id="maven-options-profiles"><a class="link" href="#maven-options-profiles">1.11. profiles</a></h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;profiles&gt;</span>
  <span class="tag">&lt;profile&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;id&gt;</span>development<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;properties&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;environment&gt;</span>development<span class="tag">&lt;/environment&gt;</span>
    <span class="tag">&lt;/properties&gt;</span>
  <span class="tag">&lt;/profile&gt;</span>
  <span class="tag">&lt;profile&gt;</span>
    <span class="tag">&lt;id&gt;</span>production<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;properties&gt;</span>
      <span class="tag">&lt;environment&gt;</span>production<span class="tag">&lt;/environment&gt;</span>
    <span class="tag">&lt;/properties&gt;</span>
  <span class="tag">&lt;/profile&gt;</span>
<span class="tag">&lt;/profiles&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>빌드 옵션에 따라 별도로 사용할 설정 지정<tr><td><i class="conum" data-value="2"></i><b>2</b><td><code>profile</code> id. 메이븐 빌드 시 <code>-P</code>옵션을 사용해 지정한다.<tr><td><i class="conum" data-value="3"></i><b>3</b><td>해당 <code>profile</code>에서 사용할 설정 지정 <code>properties</code>뿐만 아니라 <code>build</code>, <code>dependencies</code>등 다른 설정들도 재정의 할 수 있다.</table></div><div style="page-break-after: always;"></div></div></div></div><div class="sect1"><h2 id="maven-settings-xml"><a class="link" href="#maven-settings-xml">2. settings.xml</a></h2><div class="sectionbody"><div class="paragraph"><p>각각의 사용자별로 별도의 설정을 지정하고자 할 때 사용한다. 경로는 <code>~/.m2/settings.xml</code>에 위치하게 된다.</div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;settings</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/SETTINGS/1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/SETTINGS/1.0.0</span>
                      <span class="content">http://maven.apache.org/xsd/settings-1.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;servers&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;server&gt;</span>
          <span class="tag">&lt;id&gt;</span>maven-releases<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
          <span class="tag">&lt;username&gt;</span>username<span class="tag">&lt;/username&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
          <span class="tag">&lt;password&gt;</span>password<span class="tag">&lt;/password&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;/server&gt;</span>
      <span class="tag">&lt;server&gt;</span>
          <span class="tag">&lt;id&gt;</span>maven-snapshots<span class="tag">&lt;/id&gt;</span>
          <span class="tag">&lt;username&gt;</span>username<span class="tag">&lt;/username&gt;</span>
          <span class="tag">&lt;password&gt;</span>password<span class="tag">&lt;/password&gt;</span>
      <span class="tag">&lt;/server&gt;</span>
      <span class="tag">&lt;server&gt;</span>
          <span class="tag">&lt;id&gt;</span>maven-public<span class="tag">&lt;/id&gt;</span>
          <span class="tag">&lt;username&gt;</span>username<span class="tag">&lt;/username&gt;</span>
          <span class="tag">&lt;password&gt;</span>password<span class="tag">&lt;/password&gt;</span>
      <span class="tag">&lt;/server&gt;</span>
  <span class="tag">&lt;/servers&gt;</span>
<span class="tag">&lt;/settings&gt;</span></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td><code>settings.xml</code>의 root<tr><td><i class="conum" data-value="2"></i><b>2</b><td><code>maven repository server</code>의 정보를 작성한다.<tr><td><i class="conum" data-value="3"></i><b>3</b><td>서버의 id를 명시한다. 이 정보는 <code>pom.xml</code>의 <code>repository</code>의 id와 매핑된다.<tr><td><i class="conum" data-value="4"></i><b>4</b><td>서버가 <code>private repository</code>일 경우 사용자 이름을 작성한다.<tr><td><i class="conum" data-value="5"></i><b>5</b><td>서버가 <code>private repository</code>일 경우 사용자 비밀번호를 작성한다.</table></div><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="maven-lifecycle"><a class="link" href="#maven-lifecycle">3. Lifecycle</a></h2><div class="sectionbody"><div class="imageblock text-center"><div class="content"> <img src="/public/images/maven/maven_lifecycle.jpg" alt="maven lifecycle"></div><div class="title">Figure 1. Maven Lifecycle</div></div><div style="page-break-after: always;"></div></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></article><br/><article id="post-2018/01/27/jenkins-description" class="post" role="article"><h1 class="post-title"> <a href="/2018/01/27/jenkins-description/"> Jenkins 사용 설명(번역) </a></h1><div class="post-date"> <time datetime="2018-01-27T00:00:00+00:00">2018/01/27/</time> <span>on <a href="/tag/etc/">Etc</a></span></div><hr/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="sect1"><h2 id="introduction"><a class="link" href="#introduction">1. Introduction</a></h2><div class="sectionbody"><div class="admonitionblock note"><table><tr><td class="icon"> <i class="fa icon-note" title="Note"></i><td class="content"><div class="paragraph"><p>본 문서는 <code>Continuous Integration</code>(지속적 통합) &amp; <code>Continuous Deliver</code>(지속적 전달)툴인 Jenkins에 관하여 설명하는 목적으로 작성한다.<br> 본 문서는 공식 가이드 문서와 사용자 경험을 바탕으로 작성하고, 초안은 2.46.2 버전을 기준으로 작성한다.</div></table></div><div style="page-break-after: always;"></div><div class="sect2"><h3 id="continuous_integration"><a class="link" href="#continuous_integration">1.1. Continuous Integration</a></h3><div class="quoteblock"><blockquote><div class="paragraph"><p>In software engineering, continuous integration (CI) is the practice of merging all developer working copies to a shared mainline several times a day. Grady Booch first named and proposed CI in his 1991 method, although he did not advocate integrating several times a day. Extreme programming (XP) adopted the concept of CI and did advocate integrating more than once per day - perhaps as many as tens of times per day.</div></blockquote><div class="attribution"> &#8212; <a href="https://en.wikipedia.org/wiki/Continuous_integration">Wikipedia</a></div></div><div class="paragraph"><p>지속적 통합(이하 CI)이란 소프트웨어를 개발하는 과정에서 개발자들이 개발한 소스코드 내용을 정기적으로 통합을 하는 것을 의미한다. 소스코드를 지속적으로 통합하고 빌드함으로써 최종 통합 과정에서 발생하는 위험 줄이고, 지속적으로 퀄리티 컨트롤을 적용하는 프로세스를 실행하여 제품의 품질을 높이는 것이 목적이다. 또한, CI는 소프트웨어 개발 과정에서 반복적으로 하는 수동 작업을 자동화 함으로써, 빌드에 소요되는 시간을 줄이는 것을 목적으로 한다.</div><div class="dlist"><dl><dt class="hdlist1">CI의 이점<dd><div class="ulist"><ul><li><p>생산성 향상<li><p>테스트 자동화에 따른 빠른 버그 검출 및 해결<li><p>정적 코드 분석에 의한 소스코드 품질 향상<li><p>빠른 업데이트 제공</ul></div></dl></div><div style="page-break-after: always;"></div></div><div class="sect2"><h3 id="continuous_delivery"><a class="link" href="#continuous_delivery">1.2. Continuous Delivery</a></h3><div class="paragraph"><p>CI가 지속적으로 통합하고, 빌드하는 것을 의미한다면, 지속적 전달(이하 CD)이란 코드 변경에 따라 지속적으로 배포하는 것을 의미하는 것이다. 지속적으로 배포하는 대상은 테스트 환경이 될 수도 있고, 프로덕션 환경이 될 수도 있다. CD를 <code>Continuous Deployment</code>(지속적 배포)라고 말하는 이들도 있는데, 지속적 전달과 지속적 배포의 차이는 프로덕션 환경에 배포하는 과정이 수동 배포(지속적 전달)인지, 자동 배포(지속적 배포)인지에 대한 차이가 있다.</div><div class="dlist"><dl><dt class="hdlist1">CD의 이점<dd><div class="ulist"><ul><li><p>생산성 향상<li><p>테스트 환경 자동 배포에 따른 빠른 버그 검출 및 해결<li><p>빠른 업데이트 제공<li><p>소프트웨어 릴리즈 자동화</ul></div></dl></div><div style="page-break-after: always;"></div></div><div class="sect2"><h3 id="jenkins"><a class="link" href="#jenkins">1.3. Jenkins</a></h3><div class="paragraph"><p>Jenkins는 Sun Microsystem에서 Hudson이라는 이름으로 출시된 프로젝트이지만, Sun Microsystem이 Oracle에 인수되면서 Oracle과의 상표권문제로 인해서 이름을 변경하며 Jenkins로 분리되어 나왔다. Jenkins는 Java기반의 오픈소스로 CI와 CD를 가능하게 하는 툴이다. 초기에는 CI툴로 자리를 잡았으나, Blue Ocean이라는 서브 프로젝트를 구축하면서, CD툴로도 자리를 잡아가고 있다.</div><div class="dlist"><dl><dt class="hdlist1">Jenkins가 제공하는 기능<dd><div class="ulist"><ul><li><p>웹 인터페이스를 통한 간편한 설정<li><p>강력하고 편리한 Reporting 기능<li><p>지속적인 자동화 빌드<li><p>지속적인 자동화 테스트<li><p>커버리지 검사<li><p>코드 품질 검사<li><p>다양한 인증기반과 결합한 인증 및 권한 관리 기능<li><p>Groovy script를 이용한 고수준의 Job Scheduling 기능<li><p>커맨드라인 인터페이스 제공<li><p>자동화된 배포 관리<li><p>분산빌드 기능<li><p>윈도우 커맨드 스케쥴링 실행기능</ul></div></dl></div><div class="paragraph"><p>다양한 테스트 및 빌드 환경을 만들어 놓으면 Jenkins가 작업을 처리해 주기 때문에 Jenkins를 집사라고 표현하기도 한다. 각종 환경을 만드는 것은 사람이 직접해야하고, Jenkins를 효율적으로 활용하기 위해서는 다음과 같은 작업이 함께 이루어져야 한다.</div><div class="dlist"><dl><dt class="hdlist1">빌드 자동화<dd><p>빌드 자동화 스크립트를 만들어 놓음으로써 Jenkins에게 빌드를 명령하여 지속적으로 빌드할 수 있도록 한다.<dt class="hdlist1">테스트 자동화<dd><p>단위 테스트, UI 테스트 등 테스트를 자동화해놓음으로써 개인이 미처 발견하지 못한 오류를 검출하고 개인에게 알림이 갈 수 있도록 한다.<dt class="hdlist1">코드 표준 준수 여부 검사<dd><p>정적 코드 분석을 통하여 코드 품질을 높일 수 있도록 한다.<dt class="hdlist1">Build Pipeline 구성<dd><p>2개 이상의 모듈로 구성되는 프로젝트의 경우 각 모듈의 참조관계에 따라서 순차적으로 빌드할 수 있도록 한다.</dl></div><div style="page-break-after: always;"></div></div></div></div><div class="sect1"><h2 id="installing-jenkins"><a class="link" href="#installing-jenkins">2. Installing Jenkin</a></h2><div class="sectionbody"><div class="admonitionblock note"><table><tr><td class="icon"> <i class="fa icon-note" title="Note"></i><td class="content"> 본 장에서는 Jenkins의 기본 설치 방법 및 초기 설정방법에 대하여 기술한다.</table></div><div style="page-break-after: always;"></div><div class="sect2"><h3 id="pre_install"><a class="link" href="#pre_install">2.1. Pre-install</a></h3><div class="sect3"><h4 id="system_requirements"><a class="link" href="#system_requirements">2.1.1. System Requirements</a></h4><div class="paragraph"><p>최소 요구사항:</div><div class="ulist"><ul><li><p>Java 7<li><p>256MB free memory<li><p>1GB+ free disk space</ul></div><div class="paragraph"><p>소규모 팀 기준 권장 요구사항:</div><div class="ulist"><ul><li><p>Java 8<li><p>1GB+ free memory<li><p>50GB+ free disk space</ul></div><div style="page-break-after: always;"></div></div></div><div class="sect2"><h3 id="installation"><a class="link" href="#installation">2.2. Installation</a></h3><div class="sect3"><h4 id="unixlinux"><a class="link" href="#unixlinux">2.2.1. Unix/Linux</a></h4><div class="paragraph"><p>Ubuntu와 같은 Debian 계열에서는 <code>apt</code>를 통하여 설치할 수 있다. 기본 저장소에서 가장 최근의 버전을 설치할 수 있고, LTS버전을 설치하려면 별도의 저장소 설정을 해주어야 한다.</div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="bash">wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list'
sudo apt-get update
sudo apt-get install jenkins</code></pre></div></div><div class="admonitionblock tip"><table><tr><td class="icon"> <i class="fa icon-tip" title="Tip"></i><td class="content"> <code>/etc/default/jenkins</code> 파일을 통해 기본 설정을 수정할 수 있고, 포트 중복 방지를 위해서 기본 포트를 바꿔주는 것을 권장한다.</table></div></div><div class="sect3"><h4 id="os_x"><a class="link" href="#os_x">2.2.2. OS X</a></h4><div class="ulist"><ul><li><p>jenkins 공식 홈페이지에서 패키지를 다운받는다.<li><p>패키지를 실행한다.</ul></div><div class="paragraph"><p><code>brew</code>를 통해서도 설치를 할 수 있다.</div><div class="ulist"><ul><li><p>최신 버전 설치</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="bash">brew install jenkins</code></pre></div></div><div class="ulist"><ul><li><p>LTS 버전 설치</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="bash">brew install jenkins-lts</code></pre></div></div></div><div class="sect3"><h4 id="windows"><a class="link" href="#windows">2.2.3. Windows</a></h4><div class="ulist"><ul><li><p>jenkins 공식 홈페이지에서 패키지를 다운받는다.<li><p>패키지를 실행한다.</ul></div></div><div class="sect3"><h4 id="docker"><a class="link" href="#docker">2.2.4. Docker</a></h4><div class="ulist"><ul><li><p>Docker 저장소에서 jenkins 이미지를 pull 한다.</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="bash">docker pull jenkins</code></pre></div></div><div class="ulist"><ul><li><p>Docker 컨테이너를 실행한다.</ul></div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="bash">docker run -d -p 9000:8080 -v $PWD/jenkins:/var/jenkins_home -t jenkins</code></pre></div></div><div class="admonitionblock tip"><table><tr><td class="icon"> <i class="fa icon-tip" title="Tip"></i><td class="content"><div class="ulist"><ul><li><p>위와 같이 실행할 시 로컬호스트의 9000포트가 컨테이너의 8080포트와 매핑이 된다.<li><p><code>-d</code> 옵션은 데몬 실행 옵션이니, 데몬으로 실행하기를 원하지 않을 경우 제외하면 된다.</ul></div></table></div></div><div class="sect3"><h4 id="other"><a class="link" href="#other">2.2.5. Other</a></h4><div class="paragraph"><p>war로 패키지된 파일을 다운받아서 <code>Tomcat</code>이나 <code>Jetty</code>와 같은 컨테이너로 실행할 수 있다.</div><div style="page-break-after: always;"></div></div></div><div class="sect2"><h3 id="post_installationsetup_wizard"><a class="link" href="#post_installationsetup_wizard">2.3. Post-installation(Setup Wizard)</a></h3><div class="sect3"><h4 id="create_admin_user_and_password_for_jenkins"><a class="link" href="#create_admin_user_and_password_for_jenkins">2.3.1. Create Admin User and Password for Jenkins</a></h4><div class="paragraph"><p>최초로 Jenkins를 실행하고 브라우저를 통해 페이지 진입 시, 관리자 인증을 요구한다. 이 때 필요한 토큰은 Jenkins의 로그에 남아있으니, 확인후 입력해주면 된다.</div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="plain">*************************************************************

Jenkins initial setup is required. A security token is required to proceed.
Please use the following security token to proceed to installation:

41d2b60b0e4cb5bf2025d33b21cb

*************************************************************</code></pre></div></div><div class="imageblock text-center"><div class="content"> <img src="/public/images/jenkins/installing-jenkins/post-installation/administrator-password.png" alt="administrator password"></div><div class="title">Figure 1. 관리자 비밀번호</div></div></div><div class="sect3"><h4 id="initial_plugin_installation"><a class="link" href="#initial_plugin_installation">2.3.2. Initial Plugin Installation</a></h4><div class="paragraph"><p>관리자 인증을 마치면 초기 Plugin 설치를 물어보는 페이지가 나타나는데, 처음 사용한다면 추천 플러그인을 설치할 것을 권장한다.</div><div class="imageblock text-center"><div class="content"> <img src="/public/images/jenkins/installing-jenkins/post-installation/initial-plugin-installation.png" alt="initial plugin installation"></div><div class="title">Figure 2. 초기 플러그인 설치</div></div><div class="imageblock text-center"><div class="content"> <img src="/public/images/jenkins/installing-jenkins/post-installation/install-suggested-plugins.png" alt="install suggested plugins"></div><div class="title">Figure 3. 추천 플러그인 설치</div></div><div style="page-break-after: always;"></div></div></div></div></div><div class="sect1"><h2 id="system-configuration"><a class="link" href="#system-configuration">3. System Configuration</a></h2><div class="sectionbody"><div class="admonitionblock note"><table><tr><td class="icon"> <i class="fa icon-note" title="Note"></i><td class="content"> 본 장에서는 Jenkins 시스템 설정하는 방법에 대하여 기술한다.</table></div><div class="paragraph"><p>Jenkins를 설치하면 동시 실행 가능 executor의 수, 메일 서버, VCS 등 여러가지 정보를 설정할 수 있고, 플러그인 설치에 따라 더욱 다양한 정보를 설정할 수 있다. 각자 확인 후 필요한 정보들을 입력해주면 된다.</div><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="managing-security"><a class="link" href="#managing-security">4. Managing Security</a></h2><div class="sectionbody"><div class="admonitionblock note"><table><tr><td class="icon"> <i class="fa icon-note" title="Note"></i><td class="content"> 본 장에서는 Jenkins 보안 설정하는 방법에 대하여 기술한다.</table></div><div class="paragraph"><p>Jenkins는 웹 환경에서 동작하기 때문에 보안과 관련된 다양한 설정을 제공한다. Jenkins를 안전하게 사용하기 위해서 보안 설정을 필수로 해줄 것을 권장한다.</div><div class="sect2"><h3 id="enabling_security"><a class="link" href="#enabling_security">4.1. Enabling Security</a></h3><div class="paragraph"><p><strong>Enable Security</strong>설정에 따라 보안 사용 여부를 지정할 수 있다. 보안 설정은 반드시 활성화 할 것을 권장한다.</div><div class="imageblock text-center"><div class="content"> <img src="/public/images/jenkins/managing-jenkins/managing-security/enable-security.png" alt="enable security"></div><div class="title">Figure 4. 보안 설정</div></div><div class="sect3"><h4 id="jnlp_tcp_port"><a class="link" href="#jnlp_tcp_port">4.1.1. JNLP TCP Port</a></h4><div class="paragraph"><p>Jenkins는 JNLP 프로토콜을 통해 Agent를 실행할 수 있도록 TCP 포트를 사용한다.</div><div class="paragraph"><p>JNLP 기반 Agent를 위해 다음과 같은 두 가지 옵션을 제공한다.</div><div class="dlist"><dl><dt class="hdlist1">Random<dd><p>JNLP 포트를 랜덤으로 선택한다.<dt class="hdlist1">Fixed<dd><p>JNLP 포트를 관리자가 임의로 지정한다.</dl></div></div><div class="sect3"><h4 id="access_control"><a class="link" href="#access_control">4.1.2. Access Control</a></h4><div class="paragraph"><p>Access Control은 Jenkins의 주된 보안 메카니즘이다. Access Control설정을 위해 주된 두가지 설이 필요하다.</div><div class="olist arabic"><ol class="arabic"><li><p><strong>Security Realm</strong>은 사용자 정보를 가져을 방법과 위치를 알려주는 보안영역이다. 일반적으로 "인증"이라고 한다.<li><p><strong>Authorization</strong>은 사용자 혹은 그룹이 어던 측면까지 액세스할 수 있는지 설정하는 영역이다. 일반적으로 "권한"이라고 한다.</ol></div><div class="paragraph"><p>Security Realm과 Authorization 설정에 따라 완화된 혹은 엄격한 인증 및 권한 부여를 구성할 수 있다.</div><div class="paragraph"><p>또한, Role-based Authorization Strategy와 같은 플러그인을 통해 Access Control의 기능을 확장할 수 있다.</div><div class="sect4"><h5 id="security_realm"><a class="link" href="#security_realm">Security Realm</a></h5><div class="paragraph"><p>Jenkins는 기본적으로 몇가지 Security Realm을 제공한다.</div><div class="dlist"><dl><dt class="hdlist1">Delegate to servlet container<dd><p>인증 절차를 Jenkins를 실행하고있는 Servlet Container에 위임한다. 이 옵션을 사용한다면, Servlet Container의 인증 문서를 확인하길 바란다.<dt class="hdlist1">Jenkins’ own user database<dd><p>인증 절차를 다른 외부 시스템에 위임하지 않고 Jenkins 소유의 사용자 데이터베이스를 사용한다. 이 설정은 2.0부터 지원을 하고, 소규모 환경에 적합하다.<dt class="hdlist1">LDAP<dd><p>모든 인증 과정을 LDAP 서버에 위임한다. 이 옵션은 이미 LDAP 환경이 구축된 대규모 조직에 적합하다.</dl></div><div class="admonitionblock note"><table><tr><td class="icon"> <i class="fa icon-note" title="Note"></i><td class="content"> LDAP 옵션이 제공되지 않는다면, plugin:ldap[LDAP plugin] 플러그인을 설치해서 사용할 수 있다.</table></div><div class="dlist"><dl><dt class="hdlist1">Unix user/group database<dd><p>인증 절차를 Unix 운영체제에 위임한다. 이 옵션은 Unix 그룹과 사용자를 재사용할 수 있다.<dt class="hdlist1">다음과 같은 플러그인을 통해 추가적인 Security Realm을 사용할 수 있다<dd><div class="ulist"><ul><li><p>plugin:active-directory[Active Directory]<li><p>plugin:github-oauth[GitHub Authentication]<li><p>plugin:crowd2[Atlassian Crowd 2]</ul></div></dl></div></div><div class="sect4"><h5 id="authorization"><a class="link" href="#authorization">Authorization</a></h5><div class="paragraph"><p>Security Realm은 누가 Jenkins에 액세스 가능한지를 정한다. 그와 다르게 Authorization은 누가 무엇을 액세스할 수 있는지를 정한다. Jenkins는 기본적으로 몇가지 Authorization을 제공한다.</div><div class="dlist"><dl><dt class="hdlist1">Anyone can do anything<dd><p>모든 사용자가 Jenkins의 모든 기능을 활용할 수 있다. 로컬 테스트 용도가 아니라면 이 설정을 <strong>사용하지 않는 것을 권장</strong>한다.<dt class="hdlist1">Legacy mode<dd><p>사용자가 "admin"일 경우 시스템 전체의 제어 권한을 갖고, 익명 사용자를 포함한 기타 사용자는 읽기 권한만 갖는다. 로컬 테스트 용도가 아니라면 이 설정을 <strong>사용하지 않는 것을 권장</strong>한다.<dt class="hdlist1">Logged in users can do anything<dd><p>인증된 사용자가 시스템 전체 제어 권한을 갖는다. 추가 옵션으로 익명 사용자에게 읽기 권한을 부여할 지 여부를 정할 수 있다. 인증 과정을 강제로 지정할 때 유용하다.<dt class="hdlist1">Matrix-based security<dd><p>특정 사용자에게 특정 제어 권한을 부여할 수 있다.<dt class="hdlist1">Project-based Matrix Authorization Strategy<dd><p>Matrix-based security의 확장으로 각각의 프로젝트에서 특정 사용자에게 특정 제어 권한을 부여한다.</dl></div></div></div><div class="sect3"><h4 id="markup_formatter"><a class="link" href="#markup_formatter">4.1.3. Markup Formatter</a></h4><div class="paragraph"><p>Jenkins는 사용자 입력으로 HTML이나 Javascript를 입력하는 것을 허용한다. 기본 설정으로는 <code>&lt;</code> 및 <code>&amp;</code>와 같은 안전하지 않은 문자를 이스케이프처리하는 <strong>Plain Text</strong> 설정을 사용한다. <strong>Safe HTML</strong> 설정을 사용하면 사용자와 관리자가 프로젝트 설명과 같은 곳에 HTML을 사용할 수 있다.</div><div style="page-break-after: always;"></div></div></div><div class="sect2"><h3 id="cross_site_request_forgery"><a class="link" href="#cross_site_request_forgery">4.2. Cross Site Request Forgery</a></h3><div class="paragraph"><p>CSRF 보호 설정 사용 여부를 지정할 수 있다.</div><div style="page-break-after: always;"></div></div><div class="sect2"><h3 id="agentmaster_access_control"><a class="link" href="#agentmaster_access_control">4.3. Agent/Master Access Control</a></h3><div class="paragraph"><p>개념적으로, Jenkins master와 agent들은 여러 개별 프로세스와 시스템에서 실행되는 결합 시스템으로 생각할 수 있다. 이를통해 agent가 master 프로세스에 파일의 내용과 같은 사용 가능한 정보를 요청할 수 있다.</div><div class="paragraph"><p>For larger or mature Jenkins environments where a Jenkins administrator might enable agents provided by other teams or organizations, a flat agent/master trust model is insufficient. The Agent/Master Access Control system was introduced [2: Starting with 1.587, and 1.580.1, releases] to allow Jenkins administrators to add more granular access control definitions between the Jenkins master and the connected agents. As of Jenkins 2.0, this subsystem has been turned on by default.</div><div class="sect3"><h4 id="customizing_access"><a class="link" href="#customizing_access">4.3.1. Customizing Access</a></h4><div class="paragraph"><p>For advanced users who may wish to allow certain access patterns from the agents to the Jenkins master, Jenkins allows administrators to create specific exemptions from the built-in access control rules. By following the link highlighted above, an administrator may edit Commands and File Access Agent/Master access control rules.</div><div class="sect4"><h5 id="commands"><a class="link" href="#commands">Commands</a></h5><div class="paragraph"><p>"Commands" in Jenkins and its plugins are identified by their fully-qualified class names. The majority of these commands are intended to be executed on agents by a request of a master, but some of them are intended to be executed on a master by a request of an agent. Plugins not yet updated for this subsystem may not classify which category each command falls into, such that when an agent requests that the master execute a command which is not explicitly allowed, Jenkins will err on the side of caution and refuse to execute the command. In such cases, Jenkins administrators may "whitelist" [3: en.wikipedia.org/wiki/Whitelist] certain commands as acceptable for execution on the master. 20</div><div class="sect5"><h6 id="advanced"><a class="link" href="#advanced">Advanced</a></h6><div class="paragraph"><p>Administrators may also whitelist classes by creating files with the .conf extension in the directory JENKINS_HOME/secrets/whitelisted-callables.d/. The contents of these .conf files should list command names on separate lines. The contents of all the .conf files in the directory will be read by Jenkins and combined to create a default.conf file in the directory which lists all known safe command. The default.conf file will be re-written each time Jenkins boots. Jenkins also manages a file named gui.conf, in the whitelisted-callables.d directory, where commands added via the web UI are written. In order to disable the ability of administrators to change whitelisted commands from the web UI, place an empty gui.conf file in the directory and change its permissions such that is not writeable by the operating system user Jenkins run as.</div></div></div><div class="sect4"><h5 id="file_access_rules"><a class="link" href="#file_access_rules">File Access Rules</a></h5><div class="paragraph"><p>The File Access Rules are used to validate file access requests made from agents to the master. Each File Access Rule is a triplet which must contain each of the following elements: 1. allow / deny: if the following two parameters match the current request being considered, an allow entry would allow the request to be carried out and a deny entry would deny the request to be rejected, regardless of what later rules might say. 2. operation: Type of the operation requested. The following 6 values exist. The operations can also be combined by comma-separating the values. The value of all indicates all the listed operations are allowed or denied. ◦ read: read file content or list directory entries ◦ write: write file content ◦ mkdirs: create a new directory ◦ create: create a file in an existing directory ◦ delete: delete a file or directory</div><div class="paragraph"><p>◦ stat: read metadata of a file/directory, such as timestamp, length, file access modes. 3. file path: regular expression that specifies file paths that matches this rule. In addition to the base regexp syntax, it supports the following tokens: ◦ &lt;JENKINS_HOME&gt; can be used as a prefix to match the master’s JENKINS_HOME directory. ◦ &lt;BUILDDIR&gt; can be used as a prefix to match the build record directory, such as /var/lib/jenkins/job/foo/builds/2014-10-17_12-34-56. ◦ &lt;BUILDID&gt; matches the timestamp-formatted build IDs, like 2014-10-17_12-34-56. The rules are ordered, and applied in that order. The earliest match wins. For example, the following rules allow access to all files in JENKINS_HOME except the secrets folders: # To avoid hassle of escaping every '\' on Windows, you can use / even on Windows. deny all &lt;JENKINS_HOME&gt;/secrets/.* allow all &lt;JENKINS_HOME&gt;/.* Ordering is very important! The following rules are incorrectly written because the 2nd rule will never match, and allow all agents to access all files and folders under JENKINS_HOME: allow all &lt;JENKINS_HOME&gt;/.* deny all &lt;JENKINS_HOME&gt;/secrets/.*</div><div class="sect5"><h6 id="advanced_2"><a class="link" href="#advanced_2">Advanced</a></h6><div class="paragraph"><p>Administrators may also add File Access Rules by creating files with the .conf. extension in the directory JENKINS_HOME/secrets/filepath-filters.d/. Jenkins itself generates the 30-default.conf file on boot in this directory which contains defaults considered the best balance between compatibility and security by the Jenkins project. In order to disable these built-in defaults, replace 30- default.conf with an empty file which is not writable by the operating system user Jenkins run as. On each boot, Jenkins will read all .conf files in the filepath-filters.d directory in alphabetical order, therefore it is good practice to name files in a manner which indicates their load order. Jenkins also manages 50-gui.conf, in the filepath-filters/ directory, where File Access Rules added via the web UI are written. In order to disable the ability of administrators to change the File Access Rules from the web UI, place an empty 50-gui.conf file in the directory and change its permissions such that is not writeable by the operating system user Jenkins run as.</div></div></div></div><div class="sect3"><h4 id="disabling"><a class="link" href="#disabling">4.3.2. Disabling</a></h4><div class="paragraph"><p>While it is not recommended, if all agents in a Jenkins environment can be considered "trusted" to the same degree that the master is trusted, the Agent/Master Access Control feature may be disabled. Additionally, all the users in the Jenkins environment should have the same level of access to all configured projects. 22 An administrator can disable Agent/Master Access Control in the web UI by un-checking the box on the Configure Global Security page. Alternatively an administrator may create a file in JENKINS_HOME/secrets named slave-to-master-security-kill-switch with the contents of true and restart Jenkins. Most Jenkins environments grow over time requiring their trust models to CAUTION evolve as the environment grows. Please consider scheduling regular "check- ups" to review whether any disabled security settings should be re-enabled.</div><div style="page-break-after: always;"></div></div></div></div></div><div class="sect1"><h2 id="managing-users"><a class="link" href="#managing-users">5. Managing Users</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="managing-plugins"><a class="link" href="#managing-plugins">6. Managing Plugins</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="managing-nodes"><a class="link" href="#managing-nodes">7. Managing Nodes</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="freestyle-project"><a class="link" href="#freestyle-project">8. Freestyle Project</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="pipeline-project"><a class="link" href="#pipeline-project">9. Pipeline Project</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="multi-branch-pipeline-project"><a class="link" href="#multi-branch-pipeline-project">10. Multi-branch Pipeline Project</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="blue-ocean"><a class="link" href="#blue-ocean">11. Blue Ocean</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="pipeline-syntax"><a class="link" href="#pipeline-syntax">12. Pipeline Syntax</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="jenkins-with-java"><a class="link" href="#jenkins-with-java">13. Jenkins with Java</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="jenkins-with-php"><a class="link" href="#jenkins-with-php">14. Jenkins with PHP</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="jenkins-with-javascript"><a class="link" href="#jenkins-with-javascript">15. Jenkins with Javascript</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="jenkins-with-dot-net"><a class="link" href="#jenkins-with-dot-net">16. Jenkins with .NET</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="conclusions"><a class="link" href="#conclusions">17. Conclusions</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="terms"><a class="link" href="#terms">18. Terms</a></h2><div class="sectionbody"><div style="page-break-after: always;"></div></div></div><div class="sect1"><h2 id="references"><a class="link" href="#references">19. References</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p><a href="http://www.moreagile.net/2014/01/jenkins-cicontinuous-integration-2.html" class="bare">http://www.moreagile.net/2014/01/jenkins-cicontinuous-integration-2.html</a><li><p><a href="https://jenkins.io/doc/" class="bare">https://jenkins.io/doc/</a></ul></div></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></article><br/><article id="post-2017/04/23/springcamp2017secondaryday" class="post" role="article"><h1 class="post-title"> <a href="/2017/04/23/springcamp2017secondaryday/"> SpringCamp 2017 2/2 </a></h1><div class="post-date"> <time datetime="2017-04-23T00:00:00+00:00">2017/04/23/</time> <span>on <a href="/tag/etc/">Etc</a><span>, </span><a href="/tag/spring/">Spring</a><span>, </span><a href="/tag/java/">Java</a></span></div><hr/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>2016년, 2017년 2년째 참석하고 있는 스프링 캠프, 첫째날과 둘째날 모두 등록을 했는데 첫째날은 회사 당직근무와 겹치는 바람에 참석을 하지 못했다. 토비님의 발표를 꼭 듣고 싶었는데 매우 아쉽다.(같이 셀카찍었으니 괜찮…) 개인적인 생각으로 작년에는 스칼라 주제가 많아서 큰 인상을 받지 못했는데, 올해는 작년에 비해 많은 인상을 받았다. 최근 많은 개발자들이 <code>Reactive Programming</code>에 관심을 가지고 있는데, 이번 <code>Spring Camp</code>에서 <code>Reactive Programming</code>에 대해 다양한 각도에서 발표를 해주셔서 많은 것을 배우게 됐다.</div></div></div><div class="sect1"><h2 id="keynote_naver_정상혁님"><a class="link" href="#keynote_naver_정상혁님">1. Keynote - Naver 정상혁님</a></h2><div class="sectionbody"><div class="paragraph"><p>정상혁님은 KSUG 일꾼단을했고, 본인이 혹은 주위 사람들이 했던 코드기여에 대해서 보여주셨다. 정상혁님의 키노트의 핵심은 <code>오픈소스에 코드기여를 해보자!</code> 인것 같다.</div><div class="paragraph"><p>나는 오픈소스 코드 기여에 관심이 많은데, 아직까지 많이 시도를 해보진 못했다.(<code>Javascript</code>에 조금밖에.. 이것도 코드수정은 아니라…) 주 언어인 <code>Java</code>에 코드기여를 할 그날까지 더 열심히…해야겠지</div></div></div><div class="sect1"><h2 id="spring_5_reactive_springtrack_a_pivotal_정윤진님"><a class="link" href="#spring_5_reactive_springtrack_a_pivotal_정윤진님">2. Spring 5, Reactive Spring(Track A) - Pivotal 정윤진님</a></h2><div class="sectionbody"><div class="paragraph"><p>정윤진님은 주로 <code>Spring 5</code>와 <code>Reactive</code>의 개념에 대해서 발표를 해주셨던 것 같다.</div><div class="sect2"><h3 id="spring_5"><a class="link" href="#spring_5">2.1. Spring 5</a></h3><div class="paragraph"><p><code>Spring 5</code> 가장 큰 이슈는 <code>JDK 9</code> 지원과, <code>HTTP/2</code> 지원, <code>Reactive</code> 프로그래밍이다. 이에 따라 <strong>Framework의 Baseline</strong> 이 <code>Servlet 3.0</code>, <code>JDK 8+</code>로 업그레이드 된다고 한다. 또한, <code>Java 9</code>의 <code>Jigsaw Module System</code>을 지원할 예정이다. 5.0 정식 버전은 2017년 6월 출시할 예정이고, <code>Java 9</code>의 내용이 반영된 5.1은 2017년 12월에 출시될 예정이다.</div><div class="paragraph"><p><code>Jigsaw Module System</code>을 적용함으로써, 필요하지 않은 라이브러리까지 의존성이 종속되버리는 <strong>의존성 종속 문제를 해결</strong> 할 수 있다고 한다.</div><div class="paragraph"><p><code>Spring 5</code>에서는 <code>Tomcat</code>, <code>Jetty</code>, <code>Undertow</code> 등의 <code>Container</code>를 내장하는 것이 목표라고 한다.</div></div><div class="sect2"><h3 id="project_reactor"><a class="link" href="#project_reactor">2.2. Project Reactor</a></h3><div class="paragraph"><p>몇년전부터 유행하고 있는 <code>Micro Service</code>를 적용하기 위해서는 어플리케이션이 <code>Reactive</code>해야한다. <code>Reactive</code>해야한다는 것은 <code>Responsive</code>하고, <code>Elastic</code>하며, <code>Resilient</code>를 가지고, <code>Message Driven</code>해야한다는 것이다. 이렇게 말해서는 무슨 말인지 모르니 아래에 추가적으로 기술한다.</div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 50%;"><col style="width: 50%;"><thead><tr><th class="tableblock halign-left valign-top">Attribute<th class="tableblock halign-left valign-top">Description<tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Responsive(응답성)<td class="tableblock halign-left valign-top"><p class="tableblock">시스템은 가능한 즉각적으로 응답한다.<tr><td class="tableblock halign-left valign-top"><p class="tableblock">Elastic(유연성)<td class="tableblock halign-left valign-top"><p class="tableblock">시스템이 장애에 직면하더라도 응답성을 유지해야 한다.<tr><td class="tableblock halign-left valign-top"><p class="tableblock">Resilient(탄력성)<td class="tableblock halign-left valign-top"><p class="tableblock">시스템이 작업량이 변화하더라도 응답성을 유지해야 한다.<tr><td class="tableblock halign-left valign-top"><p class="tableblock">Message Driven(메세지 주도)<td class="tableblock halign-left valign-top"><p class="tableblock">비동기 메시지 전달에 의존하여 구성 요소 사이에서 느슨한 결합, 격리, 위치 투명성 을 보장하는 경계를 형성한다.</table><div class="paragraph"><p>자세한 내용은 <a href="http://www.reactivemanifesto.org">리액티브 선언문</a>을 참고하길 바란다.</div><div class="sect3"><h4 id="reactive_streams_spec"><a class="link" href="#reactive_streams_spec">2.2.1. Reactive Streams Spec</a></h4><div class="paragraph"><p>이부분은…. 적어놓고 기억이 안난다 ㅠㅠ 이 몹쓸놈의 기억력… 알코올치매… 다듬고 싶은데 기억이 나질 않아서 다듬을 수 없어서 메모했던 내용만 그대로 남긴다 ㅠㅠ</div><div class="ulist"><ul><li><p>인프라간의 상호 운영성에 집중(웹서버, 데이터 저장소 드라이버 및 웹 프레임워크)<li><p>Message Driven System<li><p>논-블러킹 백프레셔를 제공하는 비동기 스트림 프로세싱 표준<li><p>단순한 API 구조<li><p>Back pressure가 지원되는 Publisher + Subscriber(혹은 Subscription)<li><p>Java 9 의 java.util.concurrent.Flow 으로 다시 패키징 됨</ul></div></div><div class="sect3"><h4 id="reactive_streams_process"><a class="link" href="#reactive_streams_process">2.2.2. Reactive Streams Process</a></h4><div class="paragraph"><p>Mono방식과 Flux방식이 존재한다.</div></div><div class="sect3"><h4 id="example"><a class="link" href="#example">2.2.3. Example</a></h4><div class="paragraph"><p><a href="https://github.com/joshlong/flux-flix-service">Flux Example</a></div><div class="paragraph"><p>MongoDB가 필요하다. Docker를 통해 설정</div><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="bash">docker pull mongo
docker run -p 127.00.1:27017:27017 mongo</code></pre></div></div></div></div></div></div><div class="sect1"><h2 id="event_sourcingtrack_a_ms_mvp_이규원님"><a class="link" href="#event_sourcingtrack_a_ms_mvp_이규원님">3. Event Sourcing(Track A) - MS MVP 이규원님</a></h2><div class="sectionbody"><div class="paragraph"><p>이규원님은 이번 발표에서 스프링 캠프 최초를 많이 하신 것 같다. 스프링 캠프 최초 발표전 포토타임, 스프링 캠프 최초 구직광고… 뭔가 하나 더 있었는데… 참 유쾌하신 분인 것 같다.</div><div class="paragraph"><p><a href="https://doc.co/fggswS">발표자료</a></div><div class="sect2"><h3 id="event_sourcing"><a class="link" href="#event_sourcing">3.1. Event Sourcing</a></h3><div class="paragraph"><p><code>Event Sourcing</code>은 메세지를 주고받는 것이 중심이 아니라 메세지를 저장하는 것이 핵심이다. 기존의 많은 어플리케이션은 어플리케이션이 가진 마지막 상태를 데이터베이스에 저장한다. 마지막 상태 외에 다른 정보들을 보고자 할때는 마지막 상태를 보관하는 것과 함께 관심부에 대해 로깅을 한다. 이러한 상태저장과 로깅은 대부분 <code>Transactional</code>하지 않아서 데이터 유실이 발생할 가능성이 있다. <code>Event Sourcing</code>은 저장소에 저장된 이벤트를 바탕으로 이를 다시 재생하여 상태를 만들어낸다. 만약 삭제가 필요 시 실제 삭제를 하는 것이 아닌 삭제 라는 이벤트를 저장하는 것이다.</div><div class="paragraph"><p><code>Event Sourcing</code>은 명령형 기반이라 명령을 검증해야 한다. 명령어는 보통 명령형 동사를 사용한다. 이벤트는 명령에 의해 실행시키는 것이기 때문에 검증 대상이 아니다. 이벤트는 실행되면 돌이킬 수 없다. 따라서 이벤트를 재생하는 것은 실패하지 않는다. 이벤트는 이미 발생한 일이기 때문에 과거형 동사를 사용한다.</div><div class="paragraph"><p>1~n의 버전이 존재할 때 최종 상태는 1~n까지 모든 이벤트의 합이된다. 많은 이벤트 버전이 존재한다고 할 때, 1~n까지 이벤트의 합을 구하는 것은 많은 부하가 생길 수 있으므로 <code>Rolling Snapshot</code>을 사용하고, 이를 통해서 복원 속도를 올린다. <code>Rolling Snapshot</code>은 중간에 Key Value 형태로 상태를 저장하는 것이다.</div></div><div class="sect2"><h3 id="messaging"><a class="link" href="#messaging">3.2. Messaging</a></h3><div class="quoteblock"><blockquote><div class="paragraph"><p><strong>2.</strong> 메세지를 정확히 한번만 배달 <strong>1.</strong> 메세지 순서 보장 <strong>2.</strong> 메세지를 정확히 한번만 배달</div></blockquote></div><div class="paragraph"><p>메세지는 <strong>최대 1번</strong> 배달되어야 하고, <strong>최소 1번</strong> 배달되어야 한다. 이것은 메세지 유실이 발생할 수 있고, 문제 발생 시 메세지를 1번 이상 보낼 수 있다는 것을 의미한다.</div><div class="paragraph"><p>사실상 분산 트랜잭션에서 정확히 한번만 배달하는 것이 어렵다. 분산 트랜잭션 구현 자체가 힘들기 때문이다.</div><div class="paragraph"><p>이벤트 소싱은 도메인 모델에 대해서 이벤트 저장소에 저장 후 <code>Message Queue</code>에 저장한다. 저장소에 저장되어 있기 때문에 메세지 큐에 전달하면서 문제 발생 시 다시 보낼 수 있기 때문에 정확히 한번은 어렵더라도 최소 1번은 구현하기 쉽다.</div><div class="paragraph"><p>순서 보장은 해당 이벤트내에서만 순서를 지키면 문제가 없다. 하나의 이벤트 스트림에 대해서는 동시성이 일어나지 않기 때문에 메세지 순서를 보장할 수 있다.</div></div><div class="sect2"><h3 id="cqrs"><a class="link" href="#cqrs">3.3. CQRS</a></h3><div class="quoteblock"><blockquote><div class="paragraph"><p>재고가 10개 미만인 상품 목록이 필요합니다.</div></blockquote></div><div class="paragraph"><p>만약 위와 같은 조회 조건이 발생했을 때, 이벤트 저장소를 풀스캔하면 절대 안된다.</div><div class="paragraph"><p>이벤트소싱은 이론적으로는 <code>CQRS</code>에 종속되지 않지만 *현실적으로는 종속*된다.</div><div class="paragraph"><p>CQRS: Command Query Responsibility Segregation, <strong>조회</strong> 와 <strong>변경</strong> 명령을 분리한다. 시스템의 커맨드부와 쿼리부를 나눈다.</div></div><div class="sect2"><h3 id="고려사항"><a class="link" href="#고려사항">3.4. 고려사항</a></h3><div class="paragraph"><p><code>Event Sourcing</code>을 하기 위해 고려할 사항은 다음과 같다.</div><div class="ulist"><ul><li><p>익숙하지 않음<li><p>가파른 학습 곡선<li><p>일시적으로 데이터가 맞지 않을 수 있다.<li><p>과도한 엔지니어링<li><p>유일성을 제약하기 어렵다.<li><p>도구가 부족</ul></div></div><div class="sect2"><h3 id="example_2"><a class="link" href="#example_2">3.5. Example</a></h3><div class="paragraph"><p><a href="https://github.com/Reacture/Khala.EventSourcing/">.Net으로 만든 Event Sourcing 예제</a></div></div></div></div><div class="sect1"><h2 id="implementing_event_sourcing_cqrstrack_a_쿠팡_심천보님"><a class="link" href="#implementing_event_sourcing_cqrstrack_a_쿠팡_심천보님">4. Implementing Event Sourcing &amp; CQRS(Track A) - 쿠팡 심천보님</a></h2><div class="sectionbody"><div class="paragraph"><p>심천보님은 앞에 이규원님과 같은 주제의 구현부 발표를 진행해 주셨다. <code>Event Sourcing</code>과 <code>CQRS</code>, 인터넷 블로그에 있는 글을 읽을때는 이해하기 어려웠는데, 말로 설명을 들으니 금방 이해가 되고, 속이 뻥 뚫린것 같은 느낌이 들었다.</div><div class="sect2"><h3 id="event_sourcing_2"><a class="link" href="#event_sourcing_2">4.1. Event Sourcing</a></h3><div class="paragraph"><p><code>Event Sourcing</code>은 데이터 저장 방식의 새로운 패턴이다. 모든 상태 변화를 Event로 관리하고 <strong>불변</strong> 이며, <strong>Append Only</strong> 이다. 반드시 영속성을 가져야 한다. 데이터 복원 시 Event를 Replay한다.</div></div><div class="sect2"><h3 id="cqrs_2"><a class="link" href="#cqrs_2">4.2. CQRS</a></h3><div class="paragraph"><p>명령과 조회의 책임을 분리한다. 상태 처리 모델과 조회 처리 모델을 분리한다.</div><div class="paragraph"><p>조회 전용 모델이 별도로 필요하게 된다.</div></div><div class="sect2"><h3 id="implementation"><a class="link" href="#implementation">4.3. Implementation</a></h3><div class="paragraph"><p>Event Sourcing Framework를 이용할 수 있으나, 흐름을 이해하기 어려울 수 있다며 직접 구현한 부분을 보여주셨다.</div><div class="quoteblock"><blockquote><div class="olist arabic"><ol class="arabic"><li><p>Command 객체 생성 &amp; Validation<li><p>Service (Command Handler)<li><p>Aggregate 생성 -&gt; Event 조회 -&gt; Snapshot조회&amp;병합 -&gt; Event Replay<li><p>Doman 로직 수행, Event 깩체 생성<li><p>save() 이벤트 저장, 스냅샷 생성 혹은 저장<li><p>getEvents() saveEvents(), Event Publisher EventProjector</ol></div></blockquote></div><div class="paragraph"><p><a href="https://github.com/jaceshim/springcamp2017">Event Sourcing Example</a></div></div><div class="sect2"><h3 id="장점"><a class="link" href="#장점">4.4. 장점</a></h3><div class="paragraph"><p>객체/관계 불일치 해소 변경사항에 대한 완벽한 이력 저장 디버그 용이성 탁월한 쓰기 성능</div></div><div class="sect2"><h3 id="단점"><a class="link" href="#단점">4.5. 단점</a></h3><div class="paragraph"><p>익숙하지 않다. 단순 모델에 적합하지 않음 도구 부족 &amp; 성숙되지 않은 기술 Axon/Eventuate 일반적인 쿼리 조회가 불가하므로 운영시에 불편하다(CQRS로 해소)</div></div></div></div><div class="sect1"><h2 id="reactive_programming_with_rxjavatrack_a_김인태님"><a class="link" href="#reactive_programming_with_rxjavatrack_a_김인태님">5. Reactive Programming with RxJava(Track A) - 김인태님</a></h2><div class="sectionbody"><div class="paragraph"><p>RxJava, 공부하려고 책만 사놓고 아직까지 보질않고있다…ㅠㅠ 써야지, 공부해야지 하면서도 이상하게 자꾸 손이 안간다ㅠㅠ</div><div class="paragraph"><p>김인태님은 많은 내용을 한 세션에 담으려다 보니 많은 내용을 생략하신 것 같은 느낌이 많이 들었다. 이런게 있는데 시간이 없어서 자세히 설명은 못하고 공부해서 써보세요~ 같은 느낌이랄까… 그래도 RxJava를 이해하기 위해서 비동기를 이해해야된다며 <code>Thread</code>를 통해서 그부분에 대해서 자세히 설명해주시는 모습이 좋았다. 마지막 질문에 동문서답하신건 안비밀… 마지막 질문이 Spring Reactor와 RxJava의 차이에 대한 질문을 누군가 했었는데, Spring Data와 RxJava의 차이에 대해서 답변을 하셧…응…?</div><div class="sect2"><h3 id="introduction"><a class="link" href="#introduction">5.1. Introduction</a></h3><div class="paragraph"><p>Responsive, Resilient, Elastic, Message-driven</div><div class="paragraph"><p>Iterable, Future, Observable =&gt; Push 방식</div><div class="paragraph"><p>T -&gt; Observable&lt; T &gt; -&gt; Observable&lt; R &gt; -&gt; Observable&lt; T &gt; -&gt; T</div></div></div></div><div class="sect1"><h2 id="spring_data_envers_for_entity_historytrack_a_우아한형제들_김영한님"><a class="link" href="#spring_data_envers_for_entity_historytrack_a_우아한형제들_김영한님">6. Spring Data Envers for Entity History(Track A) - 우아한형제들 김영한님</a></h2><div class="sectionbody"><div class="paragraph"><p>개인적으로 김영한님이 쓰신 <code>JPA 프로그래밍</code>을 정독하고 문화적 충격을 받았었고, 많은 도움을 받았어서 책을 가져가서 저자싸인을 받아보려 했는데… 이놈의 소심한 성격이 또 나와서 책만 가져가고 싸인을 받지 못하고 돌아왔다 ㅠㅠ 이번 역시 김영한님의 발표가 많은 도움이 됐다.</div><div class="paragraph"><p>김영한님이 발표하면서 말하셨던 뭔가 어떻게하면 될 것 같은데 안되는… 그부분을 많이 고민하고있었는데, 역시 세상엔 똑똑한 사람이 많다. 이미 만들어져있을줄이야…</div><div class="paragraph"><p>히스토리 남기는 부분은 정말 내가 이러려고 개발자했나 자괴감이 들 정도로 단순 반복 노동 작업인데, 지금까지는 단순 반복 노동을 엄청 했지만, 앞으로는 많은 양을 줄이고, 편하게 할 수 있을 것 같다.</div><div class="sect2"><h3 id="데이터_관점의_공통_관심사"><a class="link" href="#데이터_관점의_공통_관심사">6.1. 데이터 관점의 공통 관심사</a></h3><div class="paragraph"><p>누가? 언제? 데이터를 변경했나? 변경 이력을 남겨야한다. 악덕 기획자를 만나면 피곤해진다.</div></div><div class="sect2"><h3 id="spring_data_auditing"><a class="link" href="#spring_data_auditing">6.2. Spring Data Auditing</a></h3><div class="paragraph"><p>누가? 언제? 데이터를 생성하거나 변경했는지 검사</div><div class="paragraph"><p><code>@EnableJpaAuditing</code></div><div class="paragraph"><p>Entity에 <code>@CreatedDate</code>, <code>@LastModifiedDate</code>, <code>@CreatedBy</code>, <code>@LastModifiedBy</code> 를 사용</div><div class="paragraph"><p><code>@MappedSuperclass</code>를 통해 귀찮은 단순 반복작업을 피하자</div></div><div class="sect2"><h3 id="hibernate_envers"><a class="link" href="#hibernate_envers">6.3. Hibernate Envers</a></h3><div class="paragraph"><p>하이버네이트 핵심 모듈 JPA 스펙에 정의된 모든 매핑 감사</div><div class="ulist"><ul><li><p>엔티티의 변경 이력을 자동으로 관리<li><p>XXX 테이블 -&gt; XXX_AUD<li><p>히스토리를 계속 쌓는 방식으로 관리<li><p>REV == Revision 식별자<li><p>REVTYPE<li><p>0: 등록<li><p>1: 수정<li><p>2: 삭제</ul></div><div class="paragraph"><p><code>@Audited</code> -&gt; Class or Method 에 사용</div></div><div class="sect2"><h3 id="특정_트랜잭션_안에서_함께_변경된_히스토리를_보고_싶을_때"><a class="link" href="#특정_트랜잭션_안에서_함께_변경된_히스토리를_보고_싶을_때">6.4. 특정 트랜잭션 안에서 함께 변경된 히스토리를 보고 싶을 때</a></h3><div class="ulist"><ul><li><p>REVINFO 테이블사용<li><p>트랜잭션 단위의 통합 Revision 키 관리</ul></div></div><div class="sect2"><h3 id="고급기능"><a class="link" href="#고급기능">6.5. 고급기능</a></h3><div class="ulist"><ul><li><p>필드마다 수정 상태 컬럼 추가</ul></div><div class="paragraph"><p>@Audited(withModifiedFlag = true) FieldName_MOD</div><div class="sect3"><h4 id="같은_트랜잭션에서_함께_변경된_엔티티를_검색"><a class="link" href="#같은_트랜잭션에서_함께_변경된_엔티티를_검색">6.5.1. 같은 트랜잭션에서 함께 변경된 엔티티를 검색</a></h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="plain">org.hibernate.envers.track_entities_changed_in_revision: true</code></pre></div></div><div class="paragraph"><p>Spring Data Envers를 사용하면 엄청 편하게 사용할 수 있다!</div></div></div></div></div><div class="sect1"><h2 id="마치며"><a class="link" href="#마치며">7. 마치며…</a></h2><div class="sectionbody"><div class="paragraph"><p>개인적으로는 이번 모든 세션 발표 내용이 주옥같은 내용들이었다. 이번 스프링 캠프에서 정말 많은, 주옥같은 꿀같은 정보를 많이 얻게되어 너무 좋았다. 세션도 대놓고 서로 연관이 있도록 배치돼있는 것 같은 느낌이 드는것이, 주최자분들이 꽤나 고생을 하신것 같다. 첫날 참석 못한것이 아직도 많이 아쉽기는 하지만 내년 스프링 캠프를 기대하며 이만…</div></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></article><br/><article id="post-2017/04/10/clean-code" class="post" role="article"><h1 class="post-title"> <a href="/2017/04/10/clean-code/"> Clean Code </a></h1><div class="post-date"> <time datetime="2017-04-10T00:00:00+00:00">2017/04/10/</time> <span>on <a href="/tag/etc/">Etc</a></span></div><hr/> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="sect1"><h2 id="코드_단위를_짧게_하라"><a class="link" href="#코드_단위를_짧게_하라">1. 코드 단위를 짧게 하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>하나의 메소드는 하나의 역할만 하도록 한다.<li><p>짧은 단위는 분석하기 쉽다.<li><p>짧은 단위가 재사용하기 쉽다.<li><p>메소드 이름을 의미있게 작성해서 가독성을 높여야한다.</ul></div></div></div><div class="sect1"><h2 id="코드_단위는_간단하게_짜라"><a class="link" href="#코드_단위는_간단하게_짜라">2. 코드 단위는 간단하게 짜라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>단위를 커버하는 테스트 케이스를 최소화해야한다.<li><p>간단한 단위는 복잡한 단위보다 이해하기 쉽고 수정하기도 쉽다.<li><p>간단한 단위는 테스트하기 쉽다.</ul></div></div></div><div class="sect1"><h2 id="코드는_한_번만_작성하라"><a class="link" href="#코드는_한_번만_작성하라">3. 코드는 한 번만 작성하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>중복코드는 여러번 수정해야 한다.</ul></div></div></div><div class="sect1"><h2 id="단위_인터페이스를_작게_하라"><a class="link" href="#단위_인터페이스를_작게_하라">4. 단위 인터페이스를 작게 하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>작은 인터페이스가 이해하고 재사용하기 쉽다.<li><p>인터페이스가 작아야 메소드를 수정하기 쉽다.<li><p>파라미터가 5개 이상 넘어가면 코드를 읽기 어렵고 하는 일이 많아질 가능성이 크다.</ul></div></div></div><div class="sect1"><h2 id="관심사를_모듈로_분리하라"><a class="link" href="#관심사를_모듈로_분리하라">5. 관심사를 모듈로 분리하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>클래스를 나누어 관심사를 분리한다.<li><p>특정 구현부는 인터페이스 안에 숨긴다.</ul></div></div></div><div class="sect1"><h2 id="아키텍처_컴포넌트를_느슨하게_결합하라"><a class="link" href="#아키텍처_컴포넌트를_느슨하게_결합하라">6. 아키텍처 컴포넌트를 느슨하게 결합하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>컴포넌트 의존성이 낮아야 분리해서 유지보수할 수 있다.<li><p>컴포넌트 의존성이 낮아야 유지보수 책임을 분담할 수 있다.<li><p>컴포넌트 의존성이 낮아야 테스트하기 쉽다.</ul></div></div></div><div class="sect1"><h2 id="아키텍처_컴포넌트의_균형을_잡아라"><a class="link" href="#아키텍처_컴포넌트의_균형을_잡아라">7. 아키텍처 컴포넌트의 균형을 잡아라</a></h2><div class="sectionbody"></div></div><div class="sect1"><h2 id="코드베이스를_작게_하라"><a class="link" href="#코드베이스를_작게_하라">8. 코드베이스를 작게 하라</a></h2><div class="sectionbody"></div></div><div class="sect1"><h2 id="테스트를_자동화하라"><a class="link" href="#테스트를_자동화하라">9. 테스트를 자동화하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>테스트를 자동화하면 반복 테스트가 가능하다.<li><p>테스트를 자동화하면 효율적으로 개발할 수 있다.<li><p>테스트를 자동화하면 예측 가능한 코드를 만든다.<li><p>테스트를 작성하면 더 나은 코드를 작성할 수 있다.<li><p>정상 케이스, 특이 케이스 모두 테스트한다.</ul></div></div></div><div class="sect1"><h2 id="클린_코드를_작성하라"><a class="link" href="#클린_코드를_작성하라">10. 클린 코드를 작성하라</a></h2><div class="sectionbody"><div class="ulist"><ul><li><p>단위 수준의 코드 악취를 남기지 말라.<li><p>나쁜 주석을 남기지 말라.<li><p>주석 안에 코드를 남기지 말라.<li><p>죽은 코드를 남기지 말라.<li><p>긴 식별자 이름을 남기지 말라.<li><p>매직 상수를 남기지 말라.<li><p>제대로 처리 안 한 예외를 남기지 말라.</ul></div></div></div><div class="sect1"><h2 id="references"><a class="link" href="#references">11. References</a></h2><div class="sectionbody"><div class="olist arabic"><ol class="arabic"><li><p>주스트 뷔서 등 5인 . 이일웅 "클린 코드의 비결 유지보수 가능한 코딩의 기술 자바편" . 길벗</ol></div></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1986785092914105" data-ad-slot="9021907658" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></article><br/><h2 class="sr-only">Pagination</h2><nav class="pagination" role="navigation"><ul><li class="pagination-item older" > <a rel="next" href="/page-5">Older</a><li class="pagination-item newer" > <a rel="prev" href="/page-3">Newer</a></ul></nav></main><div id="_backdrop" class="backdrop"></div><header id="_sidebar" class="sidebar" role="banner"><div id="_asidebar" class="container sidebar-sticky"><div class="sidebar-about"><h1 class="font-accent"><a href="/">Hyeonil's Note</a></h1><p>Hyeonil’s Dev Note</div><nav class="sidebar-nav font-accent" role="navigation"><ul><li> <a class="sidebar-nav-item " href="/tag/all/">All</a><li> <a class="sidebar-nav-item " href="/tag/java/">Java</a><li> <a class="sidebar-nav-item " href="/tag/spring/">Spring</a><li> <a class="sidebar-nav-item " href="/tag/spec/">Specification</a><li> <a class="sidebar-nav-item " href="/tag/architecture/">Architecture</a><li> <a class="sidebar-nav-item " href="/tag/diary/">Diary</a><li> <a class="sidebar-nav-item " href="/tag/etc/">Etc</a><li> <a class="sidebar-nav-item " href="/about/">About</a></ul></nav><div class="sidebar-social"><ul><li> <a href="https://github.com/hyeonil"> <span class="fa fa-github"></span> <span class="sr-only">github</span> </a><li> <a href="https://nuti.tistory.com"> <span class="fa fa-external-link"></span> <span class="sr-only">blog</span> </a></ul></div></div></header><!--[if gt IE 8]><!----> <script>loadJSDeferred('/public/js/hydejack.min.js')</script> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|PT+Serif:400,400italic,700,700italic'.split('|') }, custom: { families: ['icomoon'], urls: ['/public/css/font-awesome.min.css'] }, classes: false, events: false }; </script> <script>loadJSDeferred('https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js')</script> <script> window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga('create', 'UA-88066046-1', 'auto'); ga('send', 'pageview'); </script> <script>loadJSDeferred('https://www.google-analytics.com/analytics.js')</script> <!--<![endif]-->
